#textdomain wesnoth-UMC_Terrain_Pack

# =======Macros============================================================
#define UTP_AR_GENERIC_SINGLE_PLFB TERRAIN PROB LAYER FLAG IMAGESTEM IPF
    [terrain_graphics]
        map="
, *
* , *
, 1  
* , *
, *" 

        [tile]
            pos=1
            type={TERRAIN}
            set_no_flag={FLAG}
        [/tile]

        probability={PROB}
        [image]
            name={IMAGESTEM}@V.png{IPF}
            variations=";2;3;4;5;6;7;8;9;10;11"
            layer={LAYER}
            base=90,144
            center=90,144
        [/image]
    [/terrain_graphics]
#enddef

# Macro taken from Cataclysm to disable wall transitions for castles
#define UTP_AR:DISABLE_WALL_TRANSITIONS_F TERRAIN FLAG
    [terrain_graphics]
        [tile]
            x=0
            y=0
            type={TERRAIN}
            set_flag={FLAG}-tl,{FLAG}-tr,{FLAG}-bl,{FLAG}-br,{FLAG}-r,{FLAG}-l
        [/tile]
    [/terrain_graphics]
#enddef

#define UTP_AR_TRACK_COMPLETE_L SE_NW_VALUE N_S_VALUE NE_SW_VALUE LAYER FLAG IMAGESTEM
    {TRACK_RESTRICTED6_PLFB ({SE_NW_VALUE},{N_S_VALUE},{NE_SW_VALUE}) * *   100 {LAYER} {FLAG} IMAGE_SINGLE {IMAGESTEM}}
    {TRACK_RESTRICTED5_PLFB ({SE_NW_VALUE},{N_S_VALUE},{NE_SW_VALUE}) * *   100 {LAYER} {FLAG} IMAGE_SINGLE {IMAGESTEM}}
    {TRACK_RESTRICTED4_PLFB ({SE_NW_VALUE},{N_S_VALUE},{NE_SW_VALUE}) * *   100 {LAYER} {FLAG} IMAGE_SINGLE {IMAGESTEM}}
    {TRACK_RESTRICTED3_PLFB ({SE_NW_VALUE},{N_S_VALUE},{NE_SW_VALUE}) * *   100 {LAYER} {FLAG} IMAGE_SINGLE {IMAGESTEM}}
    {TRACK_RESTRICTED2_PLFB ({SE_NW_VALUE},{N_S_VALUE},{NE_SW_VALUE}) * *   100 {LAYER} {FLAG} IMAGE_SINGLE {IMAGESTEM}}
    {TRACK_RESTRICTED_PLFB  ({SE_NW_VALUE},{N_S_VALUE},{NE_SW_VALUE}) * * * 100 {LAYER} {FLAG} IMAGE_SINGLE {IMAGESTEM}}
    {TRACK_SINGLE_PLFB ({SE_NW_VALUE},{N_S_VALUE},{NE_SW_VALUE}) * * * 100 {LAYER} {FLAG} IMAGE_SINGLE {IMAGESTEM}}

    #emergency catch all (mainly for missing images)
    {TRACK_EMERGENCY_PLFB {SE_NW_VALUE} 100 {LAYER} {FLAG} IMAGE_SINGLE se nw {IMAGESTEM}}
    {TRACK_EMERGENCY_PLFB {N_S_VALUE}   100 {LAYER} {FLAG} IMAGE_SINGLE n  s  {IMAGESTEM}}
    {TRACK_EMERGENCY_PLFB {NE_SW_VALUE} 100 {LAYER} {FLAG} IMAGE_SINGLE ne sw {IMAGESTEM}}
#enddef

#define NEW:BEACH_UTP_AR TERRAINLIST ADJACENT IMAGESTEM IPF
    [terrain_graphics]
        map="
,  2
*,   3
,  1  
*,   *
,  *" 
        [tile]
            pos=1
            type={ADJACENT}
            set_no_flag=beach-@R0-[@R5,@R1]
        [/tile]
        [tile]
            pos=2
            type={TERRAINLIST}
            set_no_flag=beach-@R2-@R3
        [/tile]
        [tile]
            pos=3
            type={TERRAINLIST}
            set_no_flag=beach-@R4-@R3
        [/tile]

        rotations=tr,r,br,bl,l,tl

        [image]
            # wmlscope: start ignoring
            name={IMAGESTEM}-concave-@R0-@R5.png{IPF}
            # wmlscope: stop ignoring
            layer=-500
            center=90,144
            base=90,144
        [/image]
        [image]
            # wmlscope: start ignoring
            name={IMAGESTEM}-concave-@R0-@R1.png{IPF}
            # wmlscope: stop ignoring
            layer=-500
            center=90,144
            base=90,144
        [/image]
    [/terrain_graphics]
    [terrain_graphics]
        map="
,  2
*,   3
,  1  
*,   *
,  *" 
        [tile]
            pos=1
            type={TERRAINLIST}
            set_no_flag=beach-@R0-[@R5,@R1]
        [/tile]
        [tile]
            pos=2
            type={ADJACENT}
            set_no_flag=beach-@R2-@R3
        [/tile]
        [tile]
            pos=3
            type={ADJACENT}
            set_no_flag=beach-@R4-@R3
        [/tile]

        rotations=tr,r,br,bl,l,tl

        [image]
            # wmlscope: start ignoring
            name={IMAGESTEM}-convex-@R0-@R5.png{IPF}
            # wmlscope: stop ignoring
            layer=-500
            center=90,144
            base=90,144
        [/image]
        [image]
            # wmlscope: start ignoring
            name={IMAGESTEM}-convex-@R0-@R1.png{IPF}
            # wmlscope: stop ignoring
            layer=-500
            center=90,144
            base=90,144
        [/image]
    [/terrain_graphics]
    [terrain_graphics]
        map="
,  2
*,   3
,  1  
*,   *
,  *" 
        [tile]
            pos=1
            type={TERRAINLIST}
            set_no_flag=beach-@R0-@R5
        [/tile]
        [tile]
            pos=2
            type={ADJACENT}
            set_no_flag=beach-@R2-@R3
        [/tile]
        [tile]
            pos=3
            type=!,{TERRAINLIST},{ADJACENT}
        [/tile]

        rotations=tr,r,br,bl,l,tl

        [image]
            # wmlscope: start ignoring
            name={IMAGESTEM}-convex-@R0-@R5.png{IPF}
            # wmlscope: stop ignoring
            layer=-500
            center=90,144
            base=90,144
        [/image]
    [/terrain_graphics]
    [terrain_graphics]
        map="
,  2
*,   3
,  1  
*,   *
,  *" 
        [tile]
            pos=1
            type={TERRAINLIST}
            set_no_flag=beach-@R0-@R1
        [/tile]
        [tile]
            pos=2
            type=!,{TERRAINLIST},{ADJACENT}
        [/tile]
        [tile]
            pos=3
            type={ADJACENT}
            set_no_flag=beach-@R4-@R3
        [/tile]

        rotations=tr,r,br,bl,l,tl

        [image]
            # wmlscope: start ignoring
            name={IMAGESTEM}-convex-@R0-@R1.png{IPF}
            # wmlscope: stop ignoring
            layer=-500
            center=90,144
            base=90,144
        [/image]
    [/terrain_graphics]
#enddef

# end of Macros -------------------------------------------------------------------------------------------------

{OVERLAY_B *^BrYl ANIMATION_08 misc/brazier-lit}
{OVERLAY_P *^BrYu 100  misc/brazier}

[terrain_graphics]
    map="
, *
* , *
, 1
* , *
, *"

    [tile]
        pos=1
        type=*^BrYb
        set_no_flag=overlay
    [/tile]

    probability=100
    [image]
        name="misc/brazier.png~BLIT(terrain/misc/brazier-lit-A0[1~8].png~CS(-130,20,170)~CROP(0,0,72,27),0,0):150"
        layer=5
        base=90,144
        center=90,144
    [/image]
[/terrain_graphics]

# this is a place holder terrain, for the bigger overlays
{TERRAIN_BASE_LF  ZdYd					-999		lowest		            chasm/depths}

###################################################################################################
########################################## dead trees ############################################
#################################################################################################

{OVERLAY_RANDOM *^FYok forest/great-oak-dead}
{OVERLAY_RANDOM *^FYak forest/great-tree-snow}

{NEW:FOREST             *^Fdyu             (C*,K*,X*,Ql*,Qx*,Gv*,W*,A*,M*,*^V*,*^B*)    forest/dead}
{OVERLAY_LF		        *^Fdyu				   -1	         ash		                forest/ash}
{TRANSITION_COMPLETE_L  *^Fdyu             (!,*^Fdyu)                       -1          forest/ash}

{OVERLAY_P *^ZulF 100  embellishments/unlit-fire}

{TERRAIN_BASE_P        TYb                                    6                        grass/tundra3}
{TERRAIN_BASE_P        TYb                                    15                       grass/tundra2}
{TERRAIN_BASE_P        TYb                                    30                       grass/tundra5}
{TERRAIN_BASE_P        TYb                                    50                       grass/tundra4}
{TERRAIN_BASE_P        TYb                                    100                      grass/tundra1}

{TERRAIN_BASE          AYb                                                             frozen/thin-ice}
{TERRAIN_BASE_L        FYp                                  -75                        steel/plate}
{TERRAIN_BASE_PL       FYpd           50                   -75                         steel/dark-plate2}
{TERRAIN_BASE_PL       FYpd           100                  -75                         steel/dark-plate1}

# hills for dark-steel terrain

[terrain_graphics]
    map="
,*
3,*
,1,
*,2
,*"

    [tile]
        pos=1
        type=*^XYb\,*^FYb\
        set_no_flag=plate_bridge
    [/tile]
    [tile]
        pos=2
        type=*^XYb\,*^FYb\
    [/tile]
    [tile]
        pos=3
        type=*^XYb\,*^FYb\
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-bridge-se-nw@V.png"
        variations=";2"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,3
,1,
2,*
,*"

    [tile]
        pos=1
        type=*^XYb/,*^FYb/
        set_no_flag=plate_bridge
    [/tile]
    [tile]
        pos=2
        type=*^XYb/,*^FYb/
    [/tile]
    [tile]
        pos=3
        type=*^XYb/,*^FYb/
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-bridge-sw-ne.png"
        #        name="steel/dark-plate-bridge-se-nw@V.png"
        #	variations=";2"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
*,2
,*"

    [tile]
        pos=1
        type=*^FYb\
        no_flag=plate_bridge
        set_no_flag=plate_bridge_s_end
    [/tile]
    [tile]
        pos=2
        type=!,*^FYb\
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-bridge-se-end.png"
        variations=";2"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
2,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^FYb\
        no_flag=plate_bridge
        set_no_flag=plate_bridge_n_end
    [/tile]
    [tile]
        pos=2
        type=!,*^FYb\
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-bridge-nw-end.png"
        variations=";2"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,2
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^FYb/
        no_flag=plate_bridge
        set_no_flag=plate_bridge_n_end
    [/tile]
    [tile]
        pos=2
        type=!,*^FYb/
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-bridge-ne-end.png"
        #	variations=";2"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
2,*
,*"

    [tile]
        pos=1
        type=*^FYb/
        no_flag=plate_bridge
        set_no_flag=plate_bridge_s_end
    [/tile]
    [tile]
        pos=2
        type=!,*^FYb/
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-bridge-sw-end.png"
        #	variations=";2"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
2,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^XYb\
        no_flag=plate_bridge
        set_no_flag=plate_bridge_n_end_up
    [/tile]
    [tile]
        pos=2
        type=!,*^XYb\
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-bridge-nw-end-up.png"
        variations=";2"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
*,2
,*"

    [tile]
        pos=1
        type=*^XYb\
        no_flag=plate_bridge
        set_no_flag=plate_bridge_s_end_up
    [/tile]
    [tile]
        pos=2
        type=!,*^XYb\
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-bridge-se-end-up.png"
        variations=";2"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,2
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^XYb/
        no_flag=plate_bridge
        set_no_flag=plate_bridge_n_end_up
    [/tile]
    [tile]
        pos=2
        type=!,*^XYb/
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-bridge-ne-end-up.png"
        variations=";2"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
2,*
,*"

    [tile]
        pos=1
        type=*^XYb/
        no_flag=plate_bridge
        set_no_flag=plate_bridge_s_end_up
    [/tile]
    [tile]
        pos=2
        type=!,*^XYb/
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-bridge-sw-end-up.png"
        variations=";2"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^FYod
        set_no_flag=plate_clutter
    [/tile]

    probability=90
    [image]
        name="steel/dark-plate-hills@V.png"
        variations="1;3;4;5"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^FYod
        set_no_flag=plate_clutter
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-hills2.png"
        base=90,164
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^FYpp
        set_no_flag=plate_heals
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-panel.png"
        base=90,164
        center=90,144
        layer=-10
    [/image]
[/terrain_graphics]

# the less common overlays
[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=FYpd
        set_no_flag=plate_overlay
    [/tile]

    probability=15
    [image]
        name="steel/dark-plate-overlay@V.png"
        variations="7;8;11;13;15"
        base=90,164
        center=90,144
        layer=-55
    [/image]
[/terrain_graphics]

# the more common overlays
[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=FYpd
        set_no_flag=plate_overlay
    [/tile]

    probability=90
    [image]
        name="steel/dark-plate-overlay@V.png"
        variations="1;2;3;4;5;6;9;10;12;14;16;17;18"
        base=90,164
        center=90,144
        layer=-55
    [/image]
[/terrain_graphics]

{TERRAIN_BASE_L          MYb                                  -70                      brick/light}
{TERRAIN_BASE_L          PrYf                                  -79                      brick/primeval}
{OVERLAY_LF		 *^PYg					-60	top		brick/primeval-grid}
{OVERLAY_LF		 (!,Q*^PYg,!,*^PYg)			-61	bottom		brick/primeval-grid-shadow}
{OVERLAY_LF		 Q*^PYg					-61	bottom		brick/primeval-grid-safe}
{TERRAIN_BASE_L          MYbd                                 -70                      brick/dark}

#######################################################################################
############################## gates ##################################################
#######################################################################################

[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^GYe
        set_no_flag=gate
    [/tile]

    probability=100
    [image]
        name="gate-rusty-se.png"
        base=90,164
        center=90,144
        #        layer=1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^GYeo
        set_no_flag=gate
    [/tile]

    probability=100
    #    [image]
    #        name="gate-rusty-se.png"
    #        base=90,164
    #        center=90,144
    #        layer=1
    #    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*,*,*,  
*,1,*,*  
,1,*,*,  
*,*,*,*  
,*,*,*"  

    [tile]
        pos=1
        type=*^GYe*
        has_flag=gate
    [/tile]

    probability=100
    [image]
        name="gate-stone-rim-se.png"
        base=90,164
        center=126,132
        layer=1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^GYw
        set_no_flag=gate
    [/tile]

    probability=100
    [image]
        name="gate-rusty-sw.png"
        base=90,164
        center=90,144
        #        layer=1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^GYwo
        set_no_flag=gate
    [/tile]

    probability=100
    #    [image]
    #        name="gate-rusty-sw.png"
    #        base=90,164
    #        center=90,144
    #        layer=1
    #    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*,*,*,  
*,1,*,*  
,*,1,*,  
*,*,*,*  
,*,*,*"  

    [tile]
        pos=1
        type=*^GYw*
        has_flag=gate
    [/tile]

    probability=100
    [image]
        name="gate-stone-rim-sw.png"
        base=90,164
        center=162,132
        layer=1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,* 
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^GsYe
        set_no_flag=gate
    [/tile]

    probability=100
    [image]
        name="dark_planet/gate-steel-se.png"
        base=90,164
        center=90,144
        #        layer=1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^GsYw
        set_no_flag=gate
    [/tile]

    probability=100
    [image]
        name="dark_planet/gate-steel-sw.png"
        base=90,164
        center=90,144
        #        layer=1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,* 
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^GtYe
        set_no_flag=gate
    [/tile]

    probability=100
    [image]
        name="dark_planet/gate-stone-se.png"
        base=90,164
        center=90,144
        #        layer=1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*,*,*,  
*,1,*,*  
,1,*,*,  
*,*,*,*  
,*,*,*"  

    [tile]
        pos=1
        type=*^GtYe
        has_flag=gate
    [/tile]

    probability=100
    [image]
        name="dark_planet/gate-stone-rim-se.png"
        base=90,164
        center=126,132
        layer=1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,* 
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^GtYw
        set_no_flag=gate
    [/tile]

    probability=100
    [image]
        name="dark_planet/gate-stone-sw.png"
        base=90,164
        center=90,144
        #        layer=1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*,*,*,
*,1,*,*
,*,1,*,
*,*,*,*
,*,*,*"

    [tile]
        pos=1
        type=*^GtYw
        has_flag=gate
    [/tile]

    probability=100
    [image]
        name="dark_planet/gate-stone-rim-sw.png"
        base=90,164
        center=162,132
        layer=1
    [/image]
[/terrain_graphics]

# fountain
[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^FYnt
        set_no_flag=fountain
    [/tile]

    probability=100
    [image]
        name="
embellishments/fountain-0.png:150,embellishments/fountain-1.png:150,embellishments/fountain-0a.png:150,embellishments/fountain-1a.png:100,embellishments/fountain-0a.png:150,embellishments/fountain-0.png:150,embellishments/fountain-0a.png:150,embellishments/fountain-1.png:100,embellishments/fountain-0.png:100,embellishments/fountain-0a.png:100,embellishments/fountain-1.png:150,embellishments/fountain-0.png:150,embellishments/fountain-2.png:150
"
        base=90,144
        center=90,144
        layer=-15
    [/image]
[/terrain_graphics]

# marble lamp-post

[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^LYmp
        set_no_flag=lamp
    [/tile]

    probability=100
    [image]
        name="embellishments/streetlamp.png"
        base=90,144
        center=90,116
        layer=-1
        [variant]
            tod=first_watch,second_watch,dusk,midnight,underground,deep_underground
            name="embellishments/streetlamp-1.png:50,embellishments/streetlamp-2.png:100,embellishments/streetlamp-3.png:100,embellishments/streetlamp-4.png:100,embellishments/streetlamp-5.png:100,embellishments/streetlamp-6.png:100,embellishments/streetlamp-7.png:150,embellishments/streetlamp-8.png:100,embellishments/streetlamp-9.png:100,embellishments/streetlamp-10.png:100,embellishments/streetlamp-11.png:100,embellishments/streetlamp-12.png:50"
        [/variant]
    [/image]
[/terrain_graphics]

# villages

{NEW:VILLAGE             *^VYmb                                                      villages/marble}

{WALL_ADJACENT_6 XomY (!,,Xo*,Xu*) IMAGE_SINGLE marble_walls/wall-stone}
{WALL_ADJACENT_5 XomY (!,,Xo*,Xu*) IMAGE_SINGLE marble_walls/wall-stone}
{WALL_ADJACENT_4 XomY (!,,Xo*,Xu*) IMAGE_SINGLE marble_walls/wall-stone}
{WALL_ADJACENT_3 XomY (!,,Xo*,Xu*) IMAGE_SINGLE marble_walls/wall-stone}

{WALL_2_VARIATION 30 XomY (!,,Xo*,Xu*) IMAGE_SINGLE marble_walls/wall-stone2}
{WALL_ADJACENT_2 XomY (!,,Xo*,Xu*) IMAGE_SINGLE marble_walls/wall-stone}

{WALL_1_VARIATION 50 XomY (!,,Xo*,Xu*) IMAGE_SINGLE marble_walls/wall-stone2}
{WALL_ADJACENT_1 XomY (!,,Xo*,Xu*) IMAGE_SINGLE marble_walls/wall-stone}

#################################################################################################################################
################################################### gloomy terrain ##############################################################

{OVERLAY_RANDOM_L             WrbY                                      -320                                   water/other-reef}
{ANIMATED_WATER_15           (WobY)         "~CS(-25,-40,-90)"           150                                   water/ocean}
{ANIMATED_WATER_15           (WwbY,WrbY)    "~CS(-35,-45,-115)"          110                                   water/coast-tropical}
{ANIMATED_WATER_15_TRANSITION WobY           (!,WobY,!,W*,S*)           -552       "~CS(-25,-40,-90)"    150   water/ocean-blend}
{ANIMATED_WATER_15_TRANSITION WwbY,WrbY      (!,WwbY,WrbY,!,W*,S*)      -554       "~CS(-35,-45,-115)"   110   water/coast-tropical-long}
{ANIMATED_WATER_15_TRANSITION WobY           (Xv,_off^_usr)                  -562  "~CS(-25,-40,-90)"    150   water/ocean-long}
{ANIMATED_WATER_15_TRANSITION WwbY,WrbY      (Xv,_off^_usr)                  -554  "~CS(-35,-45,-115)"   110   water/coast-tropical}

{UTP_AR_GENERIC_SINGLE_PLFB        Dbyu                100     -900    base                              sand/beach      "~CS(-105,-65,-35)"}
{NEW:BEACH_UTP_AR                  Dbyu,Hby                                       WwbY,WobY,WrbY         sand/shore      "~CS(-95,-65,-45)"}
{NEW:BEACH_UTP_AR                  Urb,Rb,Uu,Uh                                   WwbY,WobY,WrbY         flat/shore      "~CS(-95,-65,-45)"}
{UTP_AR_BORDER_COMPLETE_L          Dbyu               (!,Dbyu,Hby,Urb,W*,S*,Ai)           -510           sand/beach      "~CS(-105,-65,-35)"}
{UTP_AR_BORDER_COMPLETE_L          Dbyu                R*                                 -319           sand/beach      "~CS(-105,-65,-35)"}

################### SMOKE #################################

{UTP_AR_GENERIC_SINGLE_PLFB   *^FoYg     100     11    overlay    fog/fog      "~CS(-105,-105,-115)"}
{UTP_AR_BORDER_COMPLETE_L     *^FoYg     (!,*^FoYg)      9        fog/fog      "~CS(-105,-105,-115)"}

[terrain_graphics]
    map="
,*,*,*
*,*,*,*
,*,1,*
*,*,1,*
,*,*,*"

    [tile]
        pos=1
        type=*^FoYg
        set_no_flag=smoke_overlay
    [/tile]

    probability=25
    [image]
        name="fog/overlay@V.png"
        variations=";2;3"
        base=90,90
        center=90,144
        layer=112
    [/image]
[/terrain_graphics]

##########################################################################################################################################################

# this is the transition to mountains and water
# {TRANSITION_BASE terrain adjacent prob=100 layer=-500 flag=transition imagestem

{TERRAIN_BASE_RANDOM          UrfZ                                                              dark_planet/floor}

{TRANSITION_COMPLETE          TYb		  W*                                                    grass/tundra-to-water}
{TRANSITION_COMPLETE          TYb        (!,Gg*,Qxu,Mm,Ms,Hh)                                   grass/tundra}

{TRANSITION_COMPLETE_L        FYp        (!,Mm,Ms,H*,Xu*,FYp)              -75                  steel/plate}
{TRANSITION_COMPLETE_LF       FYpd       (!,Mm,Ms,H*,Xu*,FYp*)             -76      top         steel/dark-plate}
{TRANSITION_COMPLETE_LF       FYpd       (Qx*,W*)                          -74      trim        steel/dark-plate-trim}
{TRANSITION_COMPLETE_LF       PrYf       (!,M*,H*,Xu*,PrYf)                -79      regular     brick/primeval}
{TRANSITION_COMPLETE_LF       *^PYg      (!,M*,Xu*,*^PYg)                  -60      regular     brick/primeval}
{TRANSITION_COMPLETE_LF       MYb        (!,W*,Qx*,Mm,Ms,H*,Xu*,MYb)       -75      regular     brick/light}
{TRANSITION_COMPLETE_LF       MYb        (W*,Qx*)           			   -74      top         brick/light-rim}
{TRANSITION_COMPLETE_LF       MYbd       (W*,Qx*)           			   -70      ridge       brick/dark-to-water}
{TRANSITION_COMPLETE_LF       MYbd       (FYp*,!,W*,Qx*,Mm,Ms,H*,Xu*,MYb*) -70      regular     brick/dark}

{TRANSITION_COMPLETE_LF       MYb         W*            		           -100     bottom      brick/light-to-water}

{TRANSITION_COMPLETE          AYb        (!,Gg*,Qxu,Mm,Ms,Hh,AYb)                               frozen/thin-ice}

# the paths
{LAYOUT_TRACKS_F                *^LYd\ *^LYd| *^LYd/                         overlay}
{LAYOUT_TRACKS_F                *^LYd\ *^LYd| *^LYd/                         overlay}
{TRACK_COMPLETE                 *^LYd\ *^LYd| *^LYd/                         overlay path/path}
{TRACK_BORDER_RESTRICTED_PLF   (*^LYd|,*^LYd/,*^LYd\) (!,C*,K*,*^F*) 100 -80 overlay path/path-end}
{LAYOUT_TRACKS_F                *^LYl\ *^LYl| *^LYl/                         overlay}
{LAYOUT_TRACKS_F                *^LYl\ *^LYl| *^LYl/                         overlay}
{TRACK_COMPLETE                 *^LYl\ *^LYl| *^LYl/                         overlay path/l-path}
{LAYOUT_TRACKS_F                *^LYr\ *^LYr| *^LYr/                         overlay}
{LAYOUT_TRACKS_F                *^LYr\ *^LYr| *^LYr/                         overlay}
{TRACK_COMPLETE                 *^LYr\ *^LYr| *^LYr/                         overlay path/r-path}

{MOUNTAINS_2x2           *^DYb                                     80          overlay  frozen/drift1}

{MOUNTAIN_SINGLE         *^DYb                                     20          overlay  frozen/drift-tile4}
{MOUNTAIN_SINGLE         *^DYb                                     30          overlay  frozen/drift-tile3}
{MOUNTAIN_SINGLE         *^DYb                                     50          overlay  frozen/drift-tile2}
{MOUNTAIN_SINGLE         *^DYb                                     100         overlay  frozen/drift-tile1}
{TRANSITION_COMPLETE_L   *^DYb      (!,*^DYb,W*,Ai)               -200                  frozen/snow }

# Troll camp
# TcYw instead of CtYw in order to prevent banks from being drawn by core
{KEEP_BASE               (TcYw,TkYw)                                                   castle/troll-water/base-tile}
{KEEP_BASE               (CtY,KtY)                                                     flat/dirt-dark}
{KEEP_BASE               (CtYa,KtYa)                                                   flat/snow-path}
{OVERLAY_COMPLETE         CtYs                   (!,Xv,!,C*,K*,H*,M*,X*,Q*,A*)         swamp/reed}
{KEEP_BASE               (CtYs,KtYs)                                                   swamp/mud-tile}
{OVERLAY_RANDOM          (KtY,KtYs)                                                    castle/troll/keep2}
{OVERLAY_RANDOM          (TkYw)                                                        castle/troll-water/keep2}
{OVERLAY                 (KtYa)                                                        castle/troll-snow/keep}
{NEW:WALL                (CtY,KtY,CtYs,KtYs)     (!,CtY,KtY,CtY*,KtY*,TcYw,TkYw)       castle/troll/regular}
{NEW:WALL                (CtYa,KtYa)             (!,CtY,KtY,CtY*,KtY*,TcYw,TkYw)       castle/troll-snow/regular}
{NEW:WALL                (TcYw,TkYw)             (!,CtY,KtY,CtY*,KtY*,TcYw,TkYw)       castle/troll-water/regular}
{TRANSITION_COMPLETE_LF  (TcYw,TkYw)             (Ct*)                             0   castle/troll_transition castle/troll-water/base-tile}
{UTP_AR:DISABLE_WALL_TRANSITIONS_F (KtY*) wall}

# Despair Castle
{DISABLE_BASE_TRANSITIONS  (CydY,KydY)}
{KEEP_BASE                  KydY                                                   castle/despair/cobbles-keep}
{KEEP_BASE                  CydY                                                   castle/despair/road}
{NEW:WALL                   CydY                 (!,CydY,KydY)                     castle/despair/castle}
{NEW:WALL2                  KydY                  CydY             (!,CydY,KydY)   castle/despair/keep-castle}
{NEW:WALL                   KydY                 (!,KydY)                          castle/despair/keep}

# Ghost Castle
#something weird happens with this, try and see
#{DISABLE_BASE_TRANSITIONS  (CyhY,KyhY)}
#{KEEP_BASE                  KyhY                                                   castle/despair2/cobbles-keep}
#{KEEP_BASE                  CyhY                                                   castle/despair2/road}
#{NEW:WALL                   CyhY                 (!,CyhY,KyhY)                     castle/despair2/castle}
#{NEW:WALL2                  KyhY                  CyhY             (!,CyhY,KyhY)   castle/despair2/keep-castle}
#{NEW:WALL                   KyhY                 (!,KyhY)                          castle/despair2/keep}

# Marble Castle
{DISABLE_BASE_TRANSITIONS  (CmY,KmY)}
{KEEP_BASE                  CmY                                                    castle/marble/cobbles-keep}
{KEEP_BASE                  KmY                                                    castle/marble/plate}
{NEW:WALL                   CmY                 (!,CmY,KmY)                        castle/marble/castle}
{NEW:WALL2                  KmY                  CmY             (!,CmY,KmY)       castle/marble/keep-castle}
{NEW:WALL                   KmY                 (!,KmY)                            castle/marble/keep}

# Metal Castle
{KEEP_BASE                 (KtYm,CtYm)                                             castle/metal-castle/metal-hex}
{OVERLAY_RANDOM            (KtYm)                                                  castle/metal-castle/keep}
{TRANSITION_COMPLETE_L     (CtYm)          (!,K*,C*)                           0   castle/metal-castle/outer-small}
{TRANSITION_COMPLETE_L     (KtYm)          (!,K*,C*)                           0   castle/metal-castle/outer-large}
{NEW:WALL                  (CtYm,KtYm)     (!,CtY,KtY,CtY*,KtY*,TcYw,TkYw)         castle/metal-castle/regular}

# Primeval Castle
{DISABLE_BASE_TRANSITIONS  (CpY,KpY)}
{KEEP_BASE                  CpY                                                    castle/primeval/dirt}
{KEEP_BASE                  KpY                                                    castle/primeval/cobbles}
{NEW:WALL                   CpY                 (!,CpY,KpY)                        castle/primeval/castle}
{NEW:WALL2                  KpY                  CpY             (!,CpY,KpY)       castle/primeval/keep-castle}
{NEW:WALL                   KpY                 (!,KpY)                            castle/primeval/keep}

# Ancient Castle
{DISABLE_BASE_TRANSITIONS  (CaY,KaY)}
{TERRAIN_BASE_L             CaY                             -50                   castle/ancient/cobbles-keep}
{TERRAIN_BASE_P             KaY                              10                   castle/ancient/plate7}
{TERRAIN_BASE_P             KaY                              10                   castle/ancient/plate6}
{TERRAIN_BASE_P             KaY                              10                   castle/ancient/plate5}
{TERRAIN_BASE_P             KaY                              10                   castle/ancient/plate4}
{TERRAIN_BASE_P             KaY                              10                   castle/ancient/plate3}
{TERRAIN_BASE_P             KaY                              10                   castle/ancient/plate2}
{KEEP_BASE                  KaY                                                   castle/ancient/plate}
{NEW:WALL                   CaY           (!,CaY,KaY)                             castle/ancient/castle}
{NEW:WALL2                  KaY              CaY                  (!,CaY,KaY)     castle/ancient/keep-castle}
{NEW:WALL                   KaY           (!,KaY)                                 castle/ancient/keep}

# Ice cave and walls
{TERRAIN_BASE_RANDOM       UYi                                                   cave/ice/floor}
{TRANSITION_COMPLETE_L     UYi         (!,UYi,W*,Ai,Q*,Xu*)  -220                cave/ice/floor}

{TERRAIN_BASE            XYui                                                    cave/ice/wall-rough}
{WALL_TRANSITION_LF      Qx*              (Ai*,Aa*,Ha*,Ms*)  -90     ground      chasm/regular-snow}
{NEW:WALL                XYui             (Qx*,Ql)                               cave/ice/wall-rough-chasm}
{NEW:WALL                XYui             (!,Xu*,XYui)                           cave/ice/wall-rough}

{TERRAIN_BASE            QxYi                                                           cave/ice/depths}
{WALL_TRANSITION_LF      QxYi             (Ai*,Aa*,UYi,XYui,MYbd)    -90  ground        cave/ice/regular}
{TRANSITION_COMPLETE_LF (Cha,Kha,Coa,Koa,Cea,Kea)        QxYi        -80  transition2   cave/ice/regular-castle}

# walls
{TERRAIN_BASE_L             WuY                         -70                             wall/wall-rough}
{NEW:WALL                   WuY            (!,Wu*)                                      wall/wall-rough}

{TERRAIN_BASE_L             WuYb                        -70                             wall2/wall-rough}
{NEW:WALL                   WuYb           (!,Wu*)                                      wall2/wall-rough}

[terrain_graphics]
    map="
,*,*,
*,1,*
,1,*,
*,*,*
,*,*"

    [tile]
        pos=1
        type=*^TabY
        no_flag=overlay
        set_flag=overlay
    [/tile]

    [image]
        name=scenery-terrain/table3.png
        base=90,144
        center=120,114
        layer=0
    [/image]

    probability=100
[/terrain_graphics]

[terrain_graphics]
    map="
,* 
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^TabY
        no_flag=overlay
        set_flag=overlay
    [/tile]

    [image]
        name=scenery-terrain/table1.png
        base=90,144
        center=90,144
        layer=0
    [/image]

    probability=30
[/terrain_graphics]

[terrain_graphics]
    map="
,* 
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^TabY
        no_flag=overlay
        set_flag=overlay
    [/tile]

    [image]
        name=scenery-terrain/table2.png
        base=90,144
        center=90,144
        layer=0
    [/image]

    probability=100
[/terrain_graphics]

# Trinity stuff

[terrain_graphics]
    map="
.,  *,  .,  .
, *,  *,  .
*,  1,  *,  .
, 1,  1,  *
*,  1,  *,  .
, *,  *,  .
.,  *,  .,   .
, .,  .,  ."

    [tile]
        pos=1
        type=*^EYt
        no_flag=
        set_flag=overlay
    [/tile]
    [image]
        name=EngineBig_1.png
        base=88,107
        layer=1
    [/image]

    [image]
        name=EngineBig_2.png
        base=142,72
        layer=1
    [/image]

    [image]
        name=EngineBig_3.png
        base=196,107
        layer=1
    [/image]

    probability=100
[/terrain_graphics]

[terrain_graphics]
    map="
, *
* , *
, 1
* , *
, *"

    [tile]
        pos=1
        type=*^EYt
        no_flag=overlay
        set_flag=overlay
    [/tile]

    [image]
        name=engine-tile1.png
        base=90,107
        center=90,144
        layer=1
    [/image]

    probability=100
[/terrain_graphics]

{TERRAIN_BASE_P SpaY 30 flat/snow-path2}
{TERRAIN_BASE   SpaY    flat/snow-path}

#villages

{VILLAGE        *^VYb  bellows}

{VILLAGE_RANDOM *^AYb  villages/air-vent}
{VILLAGE_RANDOM *^VYpr villages/primeval}
{VILLAGE_RANDOM *^VYsh villages/shackhut}

# desert mountains

[terrain_graphics]
    map="
* , * , *
, * , *
* , 2 , *
, 2 , 2
* , 1 , *
, * , *
* , * , *"

    [tile]
        pos=2
        type=MdsY
        no_flag=base_big,base_side
        set_flag=base_side
    [/tile]

    [tile]
        pos=1
        type=MdsY
        set_flag=base_big
    [/tile]

    [image]
        name=mountains/desert/dry_5.png
        base=90,107
        center=144,144
    [/image]

    probability=66
[/terrain_graphics]

[terrain_graphics]
    map="
, *  
* , *
, 1  
* , *
, *"

    [tile]
        pos=1
        type=MdsY
        no_flag=base_small,base_side,base_big
        set_flag=base_small
    [/tile]

    [image]
        name=mountains/desert/dry.png
        base=90,107
        center=90,144
    [/image]

    probability=33
[/terrain_graphics]

[terrain_graphics]
    map="
, *  
* , *
, 1  
* , *
, *"

    [tile]
        pos=1
        type=MdsY
        no_flag=base_small,base_side,base_big
        set_flag=base_small
    [/tile]

    [image]
        name=mountains/desert/dry2.png
        base=90,107
        center=90,144
    [/image]

    probability=50
[/terrain_graphics]

[terrain_graphics]
    map="
, *  
* , *
, 1  
* , *
, *"

    [tile]
        pos=1
        type=MdsY
        no_flag=base_small,base_side,base_big
        set_flag=base_small
    [/tile]

    [image]
        name=mountains/desert/dry3.png
        base=90,107
        center=90,144
    [/image]

    probability=100
[/terrain_graphics]

[terrain_graphics]
    map="
, *, *, *, *
* ,* , *, *, *
, *, *, *, *  
* ,* , *, *, *
, *, *, *, *  
* ,* , *, *, *
, *, 1, 1, *  
* ,* , 1, *, *
, *, *, *, *  
*, * , *, *, *
, *, *, *, *" 

    [tile]
        pos=1
        type=*^RutY
        no_flag=overlay
        set_flag=overlay
    [/tile]

    [image]
        name=ruins3-tower@V.png
        variations="1;2"
        base=90,190
        center=252,252
        layer=1
    [/image]
    [image]
        name=ruins1-tower-shadow2.png
        base=90,190
        center=252,252
        layer=-25
    [/image]
    probability=100
[/terrain_graphics]

[terrain_graphics]
    map="
, *, *, *, *
* ,* , *, *, *
, *, *, *, *  
* ,* , *, *, *
, *, *, *, *  
* ,* , *, *, *
, *, 1, *, *  
* ,* , 1, *, *
, *, *, *, *  
*, * , *, *, *
, *, *, *, *" 

    [tile]
        pos=1
        type=*^RutY
        no_flag=overlay
        set_flag=overlay
    [/tile]

    [image]
        name=ruins2-tower@V.png
        variations="1"
        base=90,190
        center=252,252
        layer=1
    [/image]
    [image]
        name=ruins1-tower-shadow2.png
        base=90,190
        center=252,252
        layer=-25
    [/image]
    probability=90
[/terrain_graphics]

# sand-tower ruins taken from TotSS

[terrain_graphics]
    map="
, *, *, *, *
* ,* , *, *, *
, *, *, *, *  
* ,* , *, *, *
, *, *, *, *  
* ,* , 1, *, *
, *, *, *, *  
* ,* , *, *, *
, *, *, *, *  
*, * , *, *, *
, *, *, *, *" 

    [tile]
        pos=1
        type=*^RutY
        no_flag=overlay
        set_flag=overlay
    [/tile]

    [image]
        name=ruins1-tower@V.png
        variations="1"
        base=90,190
        center=252,202
        layer=0
    [/image]
    [image]
        name=ruins1-tower-shadow1.png
        base=90,190
        center=252,202
        layer=-25
    [/image]
    probability=33
[/terrain_graphics]

[terrain_graphics]
    map="
, *, *, *, *
* ,* , *, *, *
, *, *, *, *  
* ,* , *, *, *
, *, *, *, *  
* ,* , *, *, *
, *, *, *, *  
* ,* , 1, *, *
, *, *, *, *  
*, * , *, *, *
, *, *, *, *" 

    [tile]
        pos=1
        type=*^RutY
        no_flag=overlay
        set_flag=overlay
    [/tile]

    [image]
        name=ruins1-tower@V.png
        variations="2;3"
        base=90,190
        center=252,252
        layer=0
    [/image]
    [image]
        name=ruins1-tower-shadow2.png
        base=90,190
        center=252,252
        layer=-25
    [/image]
    probability=100
[/terrain_graphics]

[terrain_graphics]
    map="
*, *, * 
, *, *,  
*, 1, * 
, *, *, 
*, *, *" 

    [tile]
        pos=1
        type=*^RusY
        set_no_flag=ruins_base
    [/tile]

    [image]
        name=ruins@V-rubble-small.png
        variations="2;3;4"
        center=144,108
        layer=-26
    [/image]
    probability=90
[/terrain_graphics]

# less common

[terrain_graphics]
    map="
*, *, * 
, *, *,  
*, 1, * 
,*, *, 
*, *, * "

    [tile]
        pos=1
        type=*^RusY
        set_no_flag=ruins_base
    [/tile]

    [image]
        name=ruins@V-rubble-small.png
        variations="1;5;7"
        center=144,108
        layer=-26
    [/image]
    probability=100
[/terrain_graphics]

[terrain_graphics]
    map="
*, *, * 
, *, *,  
*, 1, * 
, 2, 2, 
*, 2, *" 

    [tile]
        pos=1
        type=*^RusY
        set_no_flag=ruins_overlay
        has_flag=ruins_base
    [/tile]
    [tile]
        pos=2
        type=*^RusY
        has_flag=ruins_base
    [/tile]

    [image]
        name=ruins@V-tower-small.png
        variations="3;4;7;8"
        center=144,108
        layer=-25
    [/image]
    probability=95
[/terrain_graphics]

# less common
[terrain_graphics]
    map="
*, *, * 
, *, *,  
*, 1, * 
, 2, 2, 
*, 2, *" 

    [tile]
        pos=1
        type=*^RusY
        set_no_flag=ruins_overlay
        has_flag=ruins_base
    [/tile]
    [tile]
        pos=2
        type=*^RusY
        has_flag=ruins_base
    [/tile]

    [image]
        name=ruins@V-tower-small.png
        variations="10;11"
        center=144,108
        layer=-1
    [/image]
    probability=100
[/terrain_graphics]

[terrain_graphics]
    map="
*, *, * 
, *, *,  
3, 1, 3 
, 2, 2, 
*, 2, * "

    [tile]
        pos=1
        type=*^RusY
        set_no_flag=ruins_overlay
        has_flag=ruins_base
    [/tile]
    [tile]
        pos=2
        type=*^RusY
        has_flag=ruins_base
    [/tile]
    [tile]
        pos=3
        no_flag=ruins_overlay
    [/tile]

    [image]
        name=ruins@V-tower-small.png
        variations="1;2;5;6;9"
        center=144,108
        layer=-25
    [/image]
    probability=100
[/terrain_graphics]

#################################
########towers
#################################

## set base flags
##################
# bottom

[terrain_graphics]
    map="
, 1
3, 3
, 2"
    [tile]
        pos=1
        type=TphZ
        set_no_flag=sand_tower_bottom_front
    [/tile]
    [tile]
        pos=2
        type=!,TphZ,TfhZ
    [/tile]
    [tile]
        pos=3
        type=!,TphZ
    [/tile]
[/terrain_graphics]
[terrain_graphics]
    map="
, 1
3, 3
, 2"
    [tile]
        pos=1
        type=TfhZ
        set_no_flag=sand_tower_bottom_flatfront
    [/tile]
    [tile]
        pos=2
        type=!,TphZ
    [/tile]
    [tile]
        pos=3
        type=TphZ
    [/tile]
[/terrain_graphics]
[terrain_graphics]
    map="
, 1
3, 3
, 2"
    [tile]
        pos=1
        type=TphZ
        set_no_flag=sand_tower_bottom_back
    [/tile]
    [tile]
        pos=2
        type=!,TphZ,TfhZ
    [/tile]
    [tile]
        pos=3
        type=TphZ
    [/tile]
[/terrain_graphics]
[terrain_graphics]
    map="
, 1
4, 3
, 2"
    [tile]
        pos=1
        type=TphZ
        set_no_flag=sand_tower_bottom_left
    [/tile]
    [tile]
        pos=2
        type=!,TphZ
    [/tile]
    [tile]
        pos=3
        type=TphZ
    [/tile]
    [tile]
        pos=4
        type=!,TphZ
    [/tile]
[/terrain_graphics]
[terrain_graphics]
    map="
, 1
4, 3
, 2"
    [tile]
        pos=1
        type=TphZ
        set_no_flag=sand_tower_bottom_right
    [/tile]
    [tile]
        pos=2
        type=!,TphZ
    [/tile]
    [tile]
        pos=3
        type=!,TphZ
    [/tile]
    [tile]
        pos=4
        type=TphZ
    [/tile]
[/terrain_graphics]

# middle
[terrain_graphics]
    map="
, 1
*, *
, 1
*, *
, 1
*, *
, 2"
    [tile]
        pos=1
        type=TphZ
        set_no_flag=sand_tower_middle_flatfront
    [/tile]
    [tile]
        pos=2
        type=TfhZ
        has_flag=sand_tower_bottom_flatfront
    [/tile]
[/terrain_graphics]
[terrain_graphics]
    map="
, 1
*, *
, 1
*, *
, 2"
    [tile]
        pos=1
        type=TphZ
        set_no_flag=sand_tower_middle_flatfront
    [/tile]
    [tile]
        pos=2
        type=TfhZ
        has_flag=sand_tower_bottom_flatfront
    [/tile]
[/terrain_graphics]
[terrain_graphics]
    map="
, 1
*, *
, 2"
    [tile]
        pos=1
        type=TphZ
        set_no_flag=sand_tower_middle_flatfront
    [/tile]
    [tile]
        pos=2
        type=TfhZ
        has_flag=sand_tower_bottom_flatfront
    [/tile]
[/terrain_graphics]

#define UTP_TRINITY_TOWER_FBLR POS
    [terrain_graphics]
        map="
, 1
*, *
, 1
*, *
, 1
*, *
, 2"
        [tile]
            pos=1
            type=TphZ
            set_no_flag=sand_tower_middle_{POS}
        [/tile]
        [tile]
            pos=2
            type=TphZ
            has_flag=sand_tower_bottom_{POS}
        [/tile]
    [/terrain_graphics]
    [terrain_graphics]
        map="
, 1
*, *
, 1
*, *
, 2"
        [tile]
            pos=1
            type=TphZ
            set_no_flag=sand_tower_middle_{POS}
        [/tile]
        [tile]
            pos=2
            type=TphZ
            has_flag=sand_tower_bottom_{POS}
        [/tile]
    [/terrain_graphics]
    [terrain_graphics]
        map="
, 1
*, *
, 2"
        [tile]
            pos=1
            type=TphZ
            set_no_flag=sand_tower_middle_{POS}
        [/tile]
        [tile]
            pos=2
            type=TphZ
            has_flag=sand_tower_bottom_{POS}
        [/tile]
    [/terrain_graphics]
#enddef

{UTP_TRINITY_TOWER_FBLR front}
{UTP_TRINITY_TOWER_FBLR back}
{UTP_TRINITY_TOWER_FBLR left}
{UTP_TRINITY_TOWER_FBLR right}

#undef UTP_TRINITY_TOWER_FBLR

# top railings
# vertical edges

[terrain_graphics]
    map="
,1
3, *
, 2"
    [tile]
        pos=1
        type=TptZ
        set_no_flag=sand_platform_le
    [/tile]
    [tile]
        pos=2
        type=TptZ
    [/tile]
    [tile]
        pos=3
        type=!,TphZ,TptZ
    [/tile]
[/terrain_graphics]
[terrain_graphics]
    map="
,1
*, 3
, 2"
    [tile]
        pos=1
        type=TptZ
        set_no_flag=sand_platform_re
    [/tile]
    [tile]
        pos=2
        type=TptZ
    [/tile]
    [tile]
        pos=3
        type=!,TphZ,TptZ
    [/tile]
[/terrain_graphics]

# flat front  railing

[terrain_graphics]
    map="
, 3
3, 3
,1
*, *
, 2"
    [tile]
        pos=1
        type=TfhZ
        has_flag=sand_tower_bottom_flatfront
        set_no_flag=sand_platform_flatfront
    [/tile]
    [tile]
        pos=2
        type=!,TphZ
    [/tile]
    [tile]
        pos=3
        type=TptZ
    [/tile]
[/terrain_graphics]

[terrain_graphics]
    map="
, 3
3, 3
,1
*, *
, 2"
    [tile]
        pos=1
        type=TphZ
        set_no_flag=sand_platform_flatfront
    [/tile]
    [tile]
        pos=2
        type=TfhZ
        has_flag=sand_tower_bottom_flatfront
    [/tile]
    [tile]
        pos=3
        type=TptZ
    [/tile]
[/terrain_graphics]
[terrain_graphics]
    map="
, 3
3, 3
,1
*, *
, 2"
    [tile]
        pos=1
        type=TphZ
        set_no_flag=sand_platform_flatfront
    [/tile]
    [tile]
        pos=2
        type=TphZ
        has_flag=sand_tower_middle_flatfront
    [/tile]
    [tile]
        pos=3
        type=TptZ
    [/tile]
[/terrain_graphics]

# ^hopefully don't need to worry about front/back, back, front, because it's Tphz, not Tptz

#define UTP_TRINITY_TOWER_FBLR POS
    [terrain_graphics]
        map="
, 3
*, *
,1
*, *
, 2"
        [tile]
            pos=1
            type=TptZ
            set_no_flag=sand_platform_fb_{POS}
        [/tile]
        [tile]
            pos=2
            type=TphZ
            has_flag=sand_tower_bottom_{POS}
        [/tile]
        [tile]
            pos=3
            type=!,TphZ,TptZ
        [/tile]
    [/terrain_graphics]
    [terrain_graphics]
        map="
, 3
*, *
,1
*, *
, 2"
        [tile]
            pos=1
            type=TptZ
            set_no_flag=sand_platform_fb_{POS}
        [/tile]
        [tile]
            pos=2
            type=TphZ
            has_flag=sand_tower_middle_{POS}
        [/tile]
        [tile]
            pos=3
            type=!,TphZ,TptZ
        [/tile]
    [/terrain_graphics]
    [terrain_graphics]
        map="
, 3
*, *
,1
*, *
, 2"
        [tile]
            pos=1
            type=TptZ
            set_no_flag=sand_platform_f_{POS}
        [/tile]
        [tile]
            pos=2
            type=TphZ
            has_flag=sand_tower_middle_{POS}
            no_flag=sand_platform_flatfront
        [/tile]
        [tile]
            pos=3
            type=TphZ,TptZ
        [/tile]
    [/terrain_graphics]
    [terrain_graphics]
        map="
, 3
*, *
,1
*, *
, 2"
        [tile]
            pos=1
            type=TptZ
            set_no_flag=sand_platform_f_{POS}
        [/tile]
        [tile]
            pos=2
            type=TphZ
            has_flag=sand_tower_bottom_{POS}
            no_flag=sand_platform_flatfront
        [/tile]
        [tile]
            pos=3
            type=TphZ,TptZ
        [/tile]
    [/terrain_graphics]
#enddef

{UTP_TRINITY_TOWER_FBLR front}
{UTP_TRINITY_TOWER_FBLR back}
{UTP_TRINITY_TOWER_FBLR left}
{UTP_TRINITY_TOWER_FBLR right}

#undef UTP_TRINITY_TOWER_FBLR

# leaving back-only out of the FBLR
[terrain_graphics]
    map="
, 3
4, *
,1
*, *
, 2"
    [tile]
        pos=1
        type=TptZ
        set_no_flag=sand_platform_bl
    [/tile]
    [tile]
        pos=2
        type=TptZ,TphZ,TfhZ
    [/tile]
    [tile]
        pos=3
        type=!,TphZ,TptZ
    [/tile]
    [tile]
        pos=4
        type=!,TphZ,TptZ
    [/tile]
[/terrain_graphics]
[terrain_graphics]
    map="
, 3
*, 4
,1
*, *
, 2"
    [tile]
        pos=1
        type=TptZ
        set_no_flag=sand_platform_br
    [/tile]
    [tile]
        pos=2
        type=TptZ,TphZ,TfhZ
    [/tile]
    [tile]
        pos=3
        type=!,TphZ,TptZ
    [/tile]
    [tile]
        pos=4
        type=!,TphZ,TptZ
    [/tile]
[/terrain_graphics]
[terrain_graphics]
    map="
, 3
4, 4
,1
*, *
, 2"
    [tile]
        pos=1
        type=TptZ
        set_no_flag=sand_platform_b0
    [/tile]
    [tile]
        pos=2
        type=TptZ,TfhZ,TphZ
    [/tile]
    [tile]
        pos=3
        type=!,TphZ,TptZ
    [/tile]
    [tile]
        pos=4
        type=TphZ,TptZ
    [/tile]
[/terrain_graphics]
[terrain_graphics]
    map="
, 3
*, *
,1
*, *
, 2"
    [tile]
        pos=1
        type=TptZ
        set_no_flag=sand_platform_0
    [/tile]
    [tile]
        pos=2
        type=TptZ,TphZ,TfhZ
    [/tile]
    [tile]
        pos=3
        type=!,TptZ,TphZ
    [/tile]
[/terrain_graphics]

##########################################################################################
###placing the images
##########################################################################################

#define UTP_TTC_C_XY
    center=144,108
#enddef
#define UTP_TTT_C_XY
    center=140,144
    base=36,36
#enddef

# tops

[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=TphZ
        has_flag=sand_platform_flatfront
        set_no_flag=sand_platform_flatfront_drawn
    [/tile]
    probability=100
    [image]
        name=sand_tower/tower-top-flatfront.png
        center=140,104
        layer=-29
    [/image]
    [image]
        name=sand_tower/cobbles.png
        {UTP_TTC_C_XY}
        layer=-36
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=TfhZ
        has_flag=sand_platform_flatfront
        set_no_flag=sand_platform_flatfront_drawn
    [/tile]
    probability=100
    [image]
        name=sand_tower/tower-top-flatfront.png
        center=140,104
        layer=-29
    [/image]
    [image]
        name=sand_tower/cobbles.png
        {UTP_TTC_C_XY}
        layer=-36
    [/image]
[/terrain_graphics]

#define UTP_TRINITY_TOWER_FBLR_I_T POS LAYER1 LAYER2 LAYER3 OTHER OTHER2
    [terrain_graphics]
        map="
*,* 
,*,*
*,1 
,*,*
*,*"
        [tile]
            pos=1
            type=TptZ
            has_flag=sand_platform_fb_{POS}
            set_no_flag=sand_platform_fb_{POS}_drawn
        [/tile]
        probability=100
        [image]
            name=sand_tower/tower-top-fc.png
            {UTP_TTT_C_XY}
            layer={LAYER1}
        [/image]
        [image]
            name=sand_tower/tower-top-back-0.png
            {UTP_TTT_C_XY}
            layer={LAYER2}
        [/image]
        {OTHER2}
        {OTHER}
        [image]
            name=sand_tower/cobbles.png
            {UTP_TTC_C_XY}
            layer={LAYER3}
        [/image]
    [/terrain_graphics]
    [terrain_graphics]
        map="
*,* 
,*,*
*,1 
,*,*
*,*"
        [tile]
            pos=1
            type=TptZ
            has_flag=sand_platform_f_{POS}
            set_no_flag=sand_platform_f_{POS}_drawn
        [/tile]
        probability=100
        [image]
            {UTP_TTT_C_XY}
            name=sand_tower/tower-top-fc.png
            layer={LAYER1}
        [/image]
        {OTHER}
        [image]
            name=sand_tower/cobbles.png
            {UTP_TTC_C_XY}
            layer={LAYER3}
        [/image]
    [/terrain_graphics]
#enddef

#walls
[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=TphZ
        has_flag=sand_tower_middle_flatfront
        set_no_flag=sand_tower_middle_flatfront_drawn
    [/tile]
    probability=33
    [image]
        name=sand_tower/tower-middle-flatfront3.png
        center=140,140
        layer=-34
    [/image]
[/terrain_graphics]
[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=TphZ
        has_flag=sand_tower_middle_flatfront
        set_no_flag=sand_tower_middle_flatfront_drawn
    [/tile]
    probability=50
    [image]
        name=sand_tower/tower-middle-flatfront2.png
        center=140,140
        layer=-34
    [/image]
[/terrain_graphics]
[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=TphZ
        has_flag=sand_tower_middle_flatfront
        set_no_flag=sand_tower_middle_flatfront_drawn
    [/tile]
    probability=100
    [image]
        name=sand_tower/tower-middle-flatfront.png
        center=140,140
        layer=-34
    [/image]
[/terrain_graphics]
[terrain_graphics]
    map="
,*,*
*,1,* 
,*,*
*,*,*
,*,*"
    [tile]
        pos=1
        type=TfhZ
        has_flag=sand_tower_bottom_flatfront
        set_no_flag=sand_tower_bottom_flatfront_drawn
    [/tile]
    probability=50
    [image]
        name=sand_tower/tower-bottom-flatfront2.png
        center=140,180
        layer=-35
    [/image]
[/terrain_graphics]
[terrain_graphics]
    map="
,*,*
*,1,* 
,*,*
*,*,*
,*,*"
    [tile]
        pos=1
        type=TfhZ
        has_flag=sand_tower_bottom_flatfront
        set_no_flag=sand_tower_bottom_flatfront_drawn
    [/tile]
    probability=100
    [image]
        name=sand_tower/tower-bottom-flatfront.png
        center=140,180
        layer=-35
    [/image]
[/terrain_graphics]
[terrain_graphics]
    map="
,*,*
*,1,* 
,*,*
*,*,*
,*,*"
    [tile]
        pos=1
        type=TfhZ
        has_flag=sand_tower_bottom_flatfront_drawn
        set_no_flag=sand_tower_bottom_flatfront_trim_drawn
    [/tile]
    probability=25
    [image]
        name=sand_tower/tower-bottom-flatfront-trim.png
        center=140,180
        layer=-34
    [/image]
[/terrain_graphics]

#define UTP_TRINITY_TOWER_FBLR_I_M POS LAYER OTHER
    [terrain_graphics]
        map="
*,* 
,*,*
*,1 
,*,*
*,*"
        [tile]
            pos=1
            type=TphZ
            has_flag=sand_tower_middle_{POS}
            set_no_flag=sand_tower_middle_{POS}_drawn
        [/tile]
        probability=25
        [image]
            name=sand_tower/tower-middle.png
            {UTP_TTT_C_XY}
            layer={LAYER}
        [/image]
        {OTHER}
    [/terrain_graphics]
    [terrain_graphics]
        map="
*,* 
,*,*
*,1 
,*,*
*,*"
        [tile]
            pos=1
            type=TphZ
            has_flag=sand_tower_middle_{POS}
            set_no_flag=sand_tower_middle_{POS}_drawn
        [/tile]
        probability=100
        [image]
            name=sand_tower/tower-middle2.png
            {UTP_TTT_C_XY}
            layer={LAYER}
        [/image]
        {OTHER}
    [/terrain_graphics]
#enddef

#define UTP_TRINITY_TOWER_FBLR_I_B POS LAYER SLAYER OTHER
    [terrain_graphics]
        map="
*,* 
,*,*
*,1 
,*,*
*,2"
        [tile]
            pos=1
            type=TphZ
            has_flag=sand_tower_bottom_{POS}
            set_no_flag=sand_tower_bottom_{POS}_drawn
        [/tile]
        [tile]
            pos=2
            type=!,Qx*
        [/tile]
        probability=100
        [image]
            name=sand_tower/tower-bottom.png
            {UTP_TTT_C_XY}
            layer={LAYER}
        [/image]
        {OTHER}
        [image]
            name=sand_tower/tower-shadow.png
            {UTP_TTT_C_XY}
            layer={SLAYER}
        [/image]
    [/terrain_graphics]

    [terrain_graphics]
        map="
*,* 
,*,*
*,1 
,*,*
*,2"
        [tile]
            pos=1
            type=TphZ
            has_flag=sand_tower_bottom_{POS}
            set_no_flag=sand_tower_bottom_{POS}_drawn
        [/tile]
        [tile]
            pos=2
            type=Qx*
        [/tile]
        probability=100
        [image]
            name=sand_tower/tower-bottom-chasm.png
            {UTP_TTT_C_XY}
            layer={LAYER}
        [/image]
        {OTHER}
    [/terrain_graphics]
#enddef

{UTP_TRINITY_TOWER_FBLR_I_T front -55 -55 -59 (
    [image]
        {UTP_TTT_C_XY}
        name=sand_tower/tower-top-fl.png
        layer=-56
    [/image]
    [image]
        {UTP_TTT_C_XY}
        name=sand_tower/tower-top-fr.png
        layer=-56
    [/image]
)(
    [image]
        name=sand_tower/tower-top-back-l.png
        {UTP_TTT_C_XY}
        layer=-56
    [/image]
    [image]
        name=sand_tower/tower-top-back-r.png
        {UTP_TTT_C_XY}
        layer=-56
    [/image]
)}
{UTP_TRINITY_TOWER_FBLR_I_T back -115 -115 -119 () ()}
{UTP_TRINITY_TOWER_FBLR_I_T left -60 -60 -62 (
    [image]
        {UTP_TTT_C_XY}
        name=sand_tower/tower-top-fl.png
        layer=-60
    [/image]
)(
    [image]
        name=sand_tower/tower-top-back-l.png
        {UTP_TTT_C_XY}
        layer=-61
    [/image]
)}
{UTP_TRINITY_TOWER_FBLR_I_T right -60 -60 -62 (
    [image]
        {UTP_TTT_C_XY}
        name=sand_tower/tower-top-fr.png
        layer=-60
    [/image]
)(
    [image]
        name=sand_tower/tower-top-back-r.png
        {UTP_TTT_C_XY}
        layer=-61
    [/image]
)}
{UTP_TRINITY_TOWER_FBLR_I_M front -50 ()}
{UTP_TRINITY_TOWER_FBLR_I_M back -110 (
    [image]
        name=sand_tower/tower-shadow-m.png
        {UTP_TTT_C_XY}
        layer=-103
    [/image]
)}
{UTP_TRINITY_TOWER_FBLR_I_M left -65 (
    [image]
        name=sand_tower/tower-shadow-m.png
        {UTP_TTT_C_XY}
        layer=-63
    [/image]
    [image]
        name=sand_tower/tower-middle-L.png
        {UTP_TTT_C_XY}
        layer=-64
    [/image]
)}
{UTP_TRINITY_TOWER_FBLR_I_M right -65 (
    [image]
        name=sand_tower/tower-middle-R.png
        {UTP_TTT_C_XY}
        layer=-64
    [/image]
)}
{UTP_TRINITY_TOWER_FBLR_I_B front -45 -106 ()}
{UTP_TRINITY_TOWER_FBLR_I_B back -105 -106 (
    [image]
        name=sand_tower/tower-shadow-b.png
        {UTP_TTT_C_XY}
        layer=-103
    [/image]
)}
{UTP_TRINITY_TOWER_FBLR_I_B left -70 -106 (
    [image]
        name=sand_tower/tower-shadow-b.png
        {UTP_TTT_C_XY}
        layer=-63
    [/image]
)}
{UTP_TRINITY_TOWER_FBLR_I_B right -70 -106 ()}

#undef UTP_TRINITY_TOWER_FBLR_I_B
#undef UTP_TRINITY_TOWER_FBLR_I_M
#undef UTP_TRINITY_TOWER_FBLR_I_T

[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=TptZ
        has_flag=sand_platform_le
        set_no_flag=sand_platform_le_drawn
    [/tile]
    probability=100
    [image]
        name=sand_tower/tower-top-le.png
        {UTP_TTT_C_XY}
        layer=-72
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=TptZ
        has_flag=sand_platform_re
        set_no_flag=sand_platform_re_drawn
    [/tile]
    probability=100
    [image]
        name=sand_tower/tower-top-re.png
        {UTP_TTT_C_XY}
        layer=-72
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=TptZ
        has_flag=sand_platform_bl
        set_no_flag=sand_platform_bl_drawn
    [/tile]
    probability=100
    [image]
        name=sand_tower/tower-top-back-l.png
        {UTP_TTT_C_XY}
        layer=-73
    [/image]
    [image]
        name=sand_tower/tower-top-back-0.png
        {UTP_TTT_C_XY}
        layer=-73
    [/image]
    [image]
        name=sand_tower/cobbles.png
        {UTP_TTC_C_XY}
        layer=-74
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=TptZ
        has_flag=sand_platform_br
        set_no_flag=sand_platform_br_drawn
    [/tile]
    probability=100
    [image]
        name=sand_tower/tower-top-back-r.png
        {UTP_TTT_C_XY}
        layer=-73
    [/image]
    [image]
        name=sand_tower/tower-top-back-0.png
        {UTP_TTT_C_XY}
        layer=-73
    [/image]

    [image]
        name=sand_tower/cobbles.png
        {UTP_TTC_C_XY}
        layer=-74
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=TptZ
        has_flag=sand_platform_b0
        set_no_flag=sand_platform_b0_drawn
    [/tile]
    probability=100
    [image]
        name=sand_tower/tower-top-back-0.png
        {UTP_TTT_C_XY}
        layer=-73
    [/image]
    [image]
        name=sand_tower/cobbles.png
        {UTP_TTC_C_XY}
        layer=-74
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=TptZ
        has_flag=sand_platform_0
        set_no_flag=sand_platform_0_drawn
    [/tile]
    probability=100
    [image]
        name=sand_tower/cobbles.png
        {UTP_TTC_C_XY}
        layer=-74
    [/image]
[/terrain_graphics]

# catch all
[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=TptZ
        set_no_flag=sand_platform_0_drawn
    [/tile]
    probability=100
    [image]
        name=sand_tower/cobbles.png
        {UTP_TTC_C_XY}
        layer=-160
    [/image]
[/terrain_graphics]

#undef UTP_TTC_C_XY

[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=*^TycD
    [/tile]
    probability=100
    [image]
        name=sand_tower/door-closed.png
        layer=-30
    [/image]
[/terrain_graphics]
[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=*^TyoD
    [/tile]
    probability=100
    [image]
        name=sand_tower/door-open.png
        layer=-30
    [/image]
[/terrain_graphics]
[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=TphZ^TpwZ
        has_flag=sand_tower_middle_right
        set_no_flag=window_drawn
    [/tile]
    probability=100
    [image]
        name=sand_tower/window-1-R.png
        layer=-30
    [/image]
[/terrain_graphics]
[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=TphZ^TpwZ
        has_flag=sand_tower_middle_left
        set_no_flag=window_drawn
    [/tile]
    probability=100
    [image]
        name=sand_tower/window-1-L.png
        layer=-64
    [/image]
[/terrain_graphics]
[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=TphZ^TpwZ
        has_flag=sand_tower_middle_front
        set_no_flag=window_drawn
    [/tile]
    probability=100
    [image]
        name=sand_tower/window-1.png
        layer=-30
    [/image]
[/terrain_graphics]
[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=TphZ^TpwZ
        has_flag=sand_tower_middle_flatfront
        set_no_flag=window_drawn
    [/tile]
    probability=100
    [image]
        name=sand_tower/window-1.png
        layer=-30
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=TphZ^TpwZ
        has_flag=sand_tower_bottom_right
        set_no_flag=window_drawn
    [/tile]
    probability=100
    [image]
        name=sand_tower/window-1-R.png
        layer=-30
    [/image]
[/terrain_graphics]
[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=TphZ^TpwZ
        has_flag=sand_tower_bottom_left
        set_no_flag=window_drawn
    [/tile]
    probability=100
    [image]
        name=sand_tower/window-1-L.png
        layer=-30
    [/image]
[/terrain_graphics]
[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=TphZ^TpwZ
        has_flag=sand_tower_bottom_front
        set_no_flag=window_drawn
    [/tile]
    probability=100
    [image]
        name=sand_tower/window-1.png
        layer=-30
    [/image]
[/terrain_graphics]
[terrain_graphics]
    map="
*,* 
,*,*
*,1 
,*,*
*,*"
    [tile]
        pos=1
        type=TfhZ^TpwZ
        #	has_flag=sand_tower_bottom_front
        set_no_flag=window_drawn
    [/tile]
    probability=100
    [image]
        name=sand_tower/window-1.png
        layer=-30
    [/image]
[/terrain_graphics]

###########################################################
# end towers
############################################################

{VILLAGE *^VmyT villages/metal-tent}

#forest fire stuff

[terrain_graphics]
    [tile]
        x,y=1,1
        type=*^FfyZ
        set_no_flag=trinity_forest_fire
        [image]
            name=fire/flames-base@V.png~O(0.7)
            layer=8
            variations=;2;3
        [/image]
        [image]
            name=fire/flames[01~15].png:100
            layer=10
        [/image]
    [/tile]
    probability=100
[/terrain_graphics]

# big fire flags

[terrain_graphics]
    map="
,*,*,*
*,*,*,*
,*,1,*
*,2,2,*
,*,*,*"
    [tile]
        pos=1
        type=*^FfyZ
        set_no_flag=trinity_forest_fire_big
    [/tile]
    [tile]
        pos=2
        type=*^FfyZ
        has_flag=trinity_forest_fire
    [/tile]
    probability=100
[/terrain_graphics]
[terrain_graphics]
    map="
,*,*,*
*,2,*,*
,*,1,*
*,2,*,*
,*,*,*"
    [tile]
        pos=1
        type=*^FfyZ
        set_no_flag=trinity_forest_fire_big
    [/tile]
    [tile]
        pos=2
        type=*^FfyZ
        has_flag=trinity_forest_fire
    [/tile]
    probability=100
[/terrain_graphics]
[terrain_graphics]
    map="
,*,*,*
*,*,*,*
,*,1,*
*,2,*,*
,*,2,*"
    [tile]
        pos=1
        type=*^FfyZ
        set_no_flag=trinity_forest_fire_big
    [/tile]
    [tile]
        pos=2
        type=*^FfyZ
        has_flag=trinity_forest_fire
    [/tile]
    probability=100
[/terrain_graphics]

# big fire graphics

[terrain_graphics]
    map="
,*,*,*
*,*,*,*
,*,1,*
*,*,*,*
,*,*,*"
    [tile]
        pos=1
        type=*^FfyZ
        has_flag=trinity_forest_fire_big
    [/tile]
    [image]
        name=fire/flames[01~15].png~SCALE(144,144):100
        layer=11
        center=216,144
    [/image]
    [image]
        name=fire/halo-[5~1].png~CS(20,-20,-35)~O(0.6):120
        layer=9
        center=216,144
    [/image]
    probability=100
[/terrain_graphics]

[terrain_graphics]
    map="
,*,*,*
*,*,*,*
,*,1,*
*,2,*,*
,*,*,*"
    [tile]
        pos=1
        type=*
        set_no_flag=trinity_forest_fire_smoke
    [/tile]
    [tile]
        pos=2
        type=*^Ffyr
        has_flag=trinity_forest_fire_big
    [/tile]
    [image]
        name=fire/smoke-@V.png
        layer=100
        variations=1;2;3;4;5;6
        center=216,144
    [/image]
    probability=100
[/terrain_graphics]

[terrain_graphics]
    map="
,*,*,*,*,*,
*,*,*,*,*,*
,*,*,1,*,*,
*,*,2,*,*,*
,*,*,2,*,*"
    [tile]
        pos=1
        type=*
        set_no_flag=trinity_forest_fire_smoke2
    [/tile]
    [tile]
        pos=2
        type=*
        has_flag=trinity_forest_fire_smoke
    [/tile]
    [image]
        name=fire/smoke-big-@V.png~O(0.7)
        layer=102
        variations=1;2;3
        center=288,144
    [/image]
    probability=100
[/terrain_graphics]

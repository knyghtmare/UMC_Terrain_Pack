#textdomain wesnoth-UMC_Terrain_Pack

# Earthy rockbound cave
{TERRAIN_BASE_RANDOM      UheY                                              cave/earthy-hills-variation }
{TRANSITION_COMPLETE_L    UheY               (!,UheY,W*,Ai)       -200      cave/earthy-hills           }

# Dry grassland elvish castle
{TERRAIN_BASE            CvzY                   castle/elvish-castle-ground-dry}
{NEW:WALL                CvzY         (!,C*,K*) castle/elven/castle}

# Blood pool
#define UTP:BLOODY
"~CS(75,-255,-255)"#enddef

{ANIMATED_WATER_15            WYwb                       {UTP:BLOODY} 110 water/coast-tropical}
{ANIMATED_WATER_15_TRANSITION WYwb (!,WYwb,!,W*,S*) -553 {UTP:BLOODY} 110 water/coast-tropical-long}
{ANIMATED_WATER_15_TRANSITION WYwb (!,WYwb,!,W*,S*) -559 {UTP:BLOODY} 110 water/coast-tropical-long}

###Brave Wings

#Snowed Drake Villages

{NEW:VILLAGE_A3         *^VdY                                          200         villages/drake-snow1-A}{VILLAGE_PROBABILITY 20}
{NEW:VILLAGE_A3         *^VdY                                          100         villages/drake-snow2-A}{VILLAGE_PROBABILITY 25}
{NEW:VILLAGE            *^VdY                                                      villages/drake-snow3}{VILLAGE_PROBABILITY 33}
{NEW:VILLAGE            *^VdY                                                      villages/drake-snow4}{VILLAGE_PROBABILITY 50}
{NEW:VILLAGE            *^VdY                                                      villages/drake-snow5}

{OVERLAY_RANDOM_L       *^KwyZ                                          -1         keep-camp}

### Aria of the Dragonslayer

# Sandstone Bridge

{BRIDGE:STRAIGHTS BaB\ BaB| BaB/ * *                 * stonebridge -80 bridge/arajunnan-bridge}
{BRIDGE:ENDS      BaB\ BaB| BaB/ * (Co*,Cu*,Ko*,Ku*) * stonebridge -80 bridge/arajunnan-bridge-castle}
{BRIDGE:ENDS      BaB\ BaB| BaB/ * (C*,K*)           * stonebridge -80 bridge/arajunnan-bridge-castle}
{BRIDGE:ENDS      BaB\ BaB| BaB/ * (C*,K*)           * stonebridge -80 bridge/arajunnan-bridge-short}
{BRIDGE:ENDS      BaB\ BaB| BaB/ * (W*,S*)           * stonebridge -80 bridge/arajunnan-bridge-water}
{BRIDGE:ENDS      BaB\ BaB| BaB/ * *                 * stonebridge -80 bridge/arajunnan-bridge}

### Return From Capture

{TERRAIN_BASE_RANDOM       (CtrY)                                                       castle/temple-frames/temple-base/road              }
{KEEP_BASE                  KtrY                                             			castle/temple-frames/temple-base/road              }
{OVERLAY                    KtrY      								            		castle/temple-frames/temple-altar2		           }

{NEW:WALL                  (CtrY,KtrY)  (!,CtrY,Ctr*,KtrY,Ktr*) 						castle/temple-frames/temple-frames                 }
{UTP_AR:DISABLE_WALL_TRANSITIONS_F      (Ktr*) wall}

{TRANSITION_COMPLETE_LF		CtrY		(!,CtrY,Rr)			-309	submerged_part		castle/temple-frames/temple-frames-base/stone-path }
#{WALL_TRANSITION            CtrY        (!,CtrY)                                       castle/temple-frames/temple-frames}

### LotI

{TERRAIN_BASE_RANDOM     ZaW                                                        frozen/arctic_wasteland}
{TERRAIN_BASE_RANDOM     ZvW                                                        hell/volcanic_wasteland}
{TERRAIN_BASE_RANDOM     ZwsL                                                       hell/wasteland}
{OVERLAY               *^VzpS                                                       villages/power_source1.png:200,villages/power_source2.png:200,villages/power_source3.png:200,villages/power_source4.png.png:200,villages/power_source5.png:200,villages/power_source6.png:200,villages/power_source7.png:200,villages/power_source8.png:200}
{OVERLAY_RANDOM        *^XiS                                                        frozen/ice-shards}

# Dark castle terrain graphics

{TERRAIN_BASE            CdwY                                              castle/evil/cobbles }
{KEEP_BASE               KdwY                                              castle/evil/cobbles }
{OVERLAY                 KdwY                                              castle/evil/keep    }

{NEW:WALL               (CdwY,KdwY)  (!,CdwY,Cdw*,KdwY,Kdw*)               castle/evil/castle  }
{UTP_AR:DISABLE_WALL_TRANSITIONS_F   (Kdw*) wall}

### Oath of Allegiance

# Sandstone Road
{TERRAIN_BASE_RANDOM       Rdc                                                      flat/sandstones-dark}
{TRANSITION_COMPLETE_L     Rdc               (!,Urb)                      -224      flat/sandstones-dark}

### custom-built

# Sand Pyramids

{NEW:VILLAGE             *^VdpY                                                     villages/desert-pyramid4}{VILLAGE_PROBABILITY 20}
{NEW:VILLAGE             *^VdpY                                                     villages/desert-pyramid5}{VILLAGE_PROBABILITY 25}
{NEW:VILLAGE             *^VdpY                                                     villages/desert-pyramid}{VILLAGE_PROBABILITY 33}
{NEW:VILLAGE             *^VdpY                                                     villages/desert-pyramid2}{VILLAGE_PROBABILITY 50}
{NEW:VILLAGE             *^VdpY                                                     villages/desert-pyramid3}


# Treehouse Villages
#20% 20% 20% 20% 20%

{NEW:VILLAGE             *^VftH                                                     villages/treehouse}{VILLAGE_PROBABILITY 20}
{NEW:VILLAGE             *^VftH                                                     villages/treehouse3}{VILLAGE_PROBABILITY 25}
{NEW:VILLAGE             *^VftH                                                     villages/treehouse4}{VILLAGE_PROBABILITY 33}
{NEW:VILLAGE             *^VftH                                                     villages/treehouse2}{VILLAGE_PROBABILITY 50}
{NEW:VILLAGE             *^VftH                                                     villages/treehouse5}

# Dunes

{OVERLAY_RANDOM_L          *^ShD                                          -1                  sand/dunes }
#{TRANSITION_COMPLETE_LF   *^ShD       G*,R*,W*,S*,D*,A*,Q*,Ur,Iwr        -220  transition4   sand/dunes }
{TRANSITION_COMPLETE_L     *^ShD      (!,*^ShD,Ai)                        -200                sand/dunes }

# Crystal Castle and Keep

{TERRAIN_BASE            CcrY                                             castle/crystal/cobbles-keep}
{KEEP_BASE               KcrY                                             castle/crystal/cobbles-for-keep}

{NEW:WALL                CcrY       (!,C*,K*)                             castle/crystal/castle         }
{NEW:WALL2               KcrY       !,Ket,!,C*,Ke*  (!,C*,K*)             castle/crystal/keep-castle    }
{NEW:WALL                KcrY       (!,K*)                                castle/crystal/keep           }

{TERRAIN_BASE            IcP                                              interior/carpet               }
{TRANSITION_COMPLETE_L   IcP     G*,R*,W*,S*,D*,A*,Q*,Ur,Iwr   -220       interior/carpet               }

# Obelisk and Monolith
{OVERLAY_RANDOM_L      *^Sob                                   -1         embellishments/desert-obelisk }

{OVERLAY_RANDOM_L      *^Emon                                  -1         scenery-terrain/monolith      }

#ship village
{NEW:VILLAGE  		   *^Vwss                                             scenery-terrain/ship-noflag   }

# Serpent fountain
[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^FYdf
        set_no_flag=fountain
    [/tile]

    probability=100
    [image]
        name="
fountain-[01~13].png:100
"
        base=90,144
        center=90,144
        layer=-15
    [/image]
[/terrain_graphics]

# Round fountain
[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^FYrf
        set_no_flag=fountain
    [/tile]

    probability=100
    [image]
        name="
embellishments/fountain-animated-[1~4].png:280
"
        base=90,144
        center=90,144
        layer=-15
    [/image]
[/terrain_graphics]

# Mangrove
{OVERLAY_RANDOM              *^SsmG                                                             scenery-terrain/mangrove}

# Deep Desert, combined from RotM and OoA

#{TERRAIN_BASE_RANDOM     XzG                                                                                                                        sand/desert-rotm}
#{WALL_TRANSITION_LF      XzG       (!,Xzg,Xv,Q*,_off^_usr,Re,Rd,Rb,W**,C*,K*,Tphz,Gs,Gd,Ds,Dt,Ft,Ht,Dt,Wdt,Wst,Hd,Hhd)   -90      ground      chasm/regular}
#{TRANSITION_COMPLETE_LF  XzG       (Xv,_off^_usr,!,Re,Gs,Gd,Ds,Dt,Ft,Ht,Dt,Wdt,Wst,Hd,Hhd)                               -601     depths      sand/desert-rotm}
#{TRANSITION_COMPLETE_L   XzG       (R*,Gs,Gd,Ds,Dt,Ft,Ht,Dt)                                                             -319                 sand/desert-rotm}

# Troll Rampart terrain graphics
{TERRAIN_BASE             CrpY                  								castle/troll-rampart/floor     }
{NEW:WALL                 CrpY      (!,C*,K*) 									castle/troll-rampart/castle    }

# Brick Castle and Keep
{TERRAIN_BASE            CbsY                                           		flat/road                      }
{KEEP_BASE               KbsY                                           	    castle/brick/brick-keep-roof   }

{NEW:WALL                CbsY       (!,C*,K*)                             		castle/brick/brick             }
{NEW:WALL2               KbsY       !,Ket,!,C*,Ke*  (!,C*,K*)             		castle/brick/brick-keep-castle }
{NEW:WALL                KbsY       (!,K*)                                		castle/brick/brick-keep        }

# Urban Jungle stuff
{NEW:FOREST    *^FrhX (C*,K*,X*,Ql*,Qx*,Gv*,W*,A*,M*,*^V*,*^B*,*^F*)      		villages/residential           }
{NEW:VILLAGE   *^VrhX                                                    		villages/residential-village   }

# Elder Tree
{OVERLAY_RANDOM 	*^FYsg forest/eldertree}

#treasury coins
{NEW:FOREST    		*^FgcX (C*,K*,X*,Ql*,Qx*,Gv*,W*,A*,M*,*^V*,*^B*,*^F*)       embellishments/goldcoins/gold  }

#metal square igloo like thingies
{NEW:VILLAGE  		*^VmbX                                                		villages/mech       }

#Stone age dwellings
{NEW:VILLAGE             *^Vpr 										            villages/paleo      }
{NEW:VILLAGE             *^Vprr 										        villages/paleo-ruin }
{NEW:VILLAGE             *^Vprs 										        villages/paleo-snow }

#Rice field
{OVERLAY_COMPLETE        *^Erf         (C*,K*,X*,Ql*,Qx*,W*,M*,*^V*)                            embellishments/rice}
{TRANSITION_COMPLETE_LF  *^Erf         (!,*^Emf,C*,K*,*^F*,M*,H*,W*,Q*)   -330   transition2    embellishments/rice}

# Dike and Pen
{NEW:FENCE *^Edik         embellishments/dike/dike}
{NEW:FENCE *^Epen         embellishments/pen/fence}

# SXRPG wooden wall
{NEW:WALL                 XowZ         (!,Xu*)                           wall/wall-wooden}
{WALL_ADJACENT            XowZ         (!,Xo*, Xu*,XowZ)    IMAGE_SINGLE wall/wall-wooden wall/wall-wooden-base}
{WALL_ADJACENT_TRANSITION XowZ         (!,,Xo*,Xu*)         IMAGE_SINGLE wall/wall-wooden}

# water encampment
{KEEP_BASE               (CewZ)                                                  castle/troll-water/base-tile}
{NEW:WALL                (CewZ)        (!,CewZ)                                  regular}
{TRANSITION_COMPLETE_LF  (CewZ)        (Ct*)                                 0   castle/troll_transition castle/troll-water/base-tile}

# 1.13 backports

{NEW:VILLAGE             *^VdrY 										         village/desert-ruin}

#{NEW:WATER_342_180      (Cm*,Km*)         								    	 water/water 17                }
{OVERLAY_RANDOM_L        (CmZ,KmZ)                             -350              castle/aquatic-castle/cobbles }
{OVERLAY_RANDOM_L        (CmeZ)                               -320               castle/aquatic-camp/reef      }
{OVERLAY_RANDOM_L        (KmeZ) 	   -310 									 castle/aquatic-camp/floor     }

#define CORNER_OVERLAY TERRAIN ADJACENT IMAGESTEM
    [terrain_graphics]
        map="
2
,  3
1"  
    
        [tile]
            pos=1
            type={TERRAIN}
        [/tile]
        [tile] 
            pos=2
            type={ADJACENT}
        [/tile]
        [tile] 
            pos=3
            type={TERRAIN},{ADJACENT}
        [/tile]

        rotations=png,foo,png,foo,png,foo

        [image]
            name={IMAGESTEM}@V.@R0
            variations=";2;3;4;5;6;7;8;9"
            layer=10
            center=52,72
            base=52,72  
        [/image]
    [/terrain_graphics]

    [terrain_graphics]
        map="
.
,  3
2   
,  1"

        [tile]
            pos=1
            type={TERRAIN}
        [/tile]
        [tile] 
            pos=2
            type={ADJACENT}
        [/tile]
        [tile] 
            pos=3
            type={TERRAIN},{ADJACENT}
        [/tile]

        rotations=png,foo,png,foo,png,foo

        [image]
            name={IMAGESTEM}@V.@R0
            variations=";2;3;4;5;6;7;8;9"
            layer=10
            center=72,108
            base=72,108  
        [/image]

    [/terrain_graphics]
#enddef

#define AQUATIC:CAMPS KEEP CAMP IMAGEPATH

    [terrain_graphics]
        [tile]
            x=0
            y=0
            type={KEEP}
            set_flag=wall-tl,wall-tr,wall-bl,wall-br,wall-r,wall-l
        [/tile]  
    [/terrain_graphics]

	{DISABLE_BASE_TRANSITIONS_F     ({KEEP},{CAMP})     non_submerged}

    [terrain_graphics]
        map="
,  2
4,   3
,  1  
.,   .
,  ." 
        [tile]
            pos=1
            type={KEEP}
            set_no_flag=pool_edge-@R0
                [image]
                    layer=0
                    name={BUILD_IMAGE IMAGE_SINGLE {IMAGEPATH}/keep-small -@R0}
                [/image]
        [/tile]
        [tile] 
            pos=2
            type={CAMP}
            set_no_flag=pool_edge-@R2
        [/tile]
        [tile] 
            pos=3
            type=!,{KEEP},{CAMP}
            set_no_flag=pool_edge-@R4
        [/tile]
        [tile] 
            pos=4
            type=!,{KEEP}
        [/tile]

        probability=100
        rotations=n,ne,se,s,sw,nw

    [/terrain_graphics]
    [terrain_graphics] 
        map="
,  2
.,   3
,  1  
.,   4
,  ." 
        [tile]
            pos=1
            type={KEEP}

            set_no_flag=pool_edge-@R1
                [image]
                    layer=0
                    name={BUILD_IMAGE IMAGE_SINGLE {IMAGEPATH}/keep-small -@R1}
                [/image]
        [/tile]
        [tile] 
            pos=2
            type=!,{KEEP},{CAMP}
            set_no_flag=pool_edge-@R2
        [/tile]
        [tile] 
            pos=3
            type={CAMP}
            set_no_flag=pool_edge-@R4
        [/tile]
        [tile] 
            pos=4
            type=!,{KEEP}
        [/tile]

        probability=100
        rotations=n,ne,se,s,sw,nw

    [/terrain_graphics]

{TRANSITION_COMPLETE_LF    ({CAMP},{KEEP})       (!,{KEEP},{CAMP},W*,Ss,Q*)    0  non_fading  {IMAGEPATH}/castle-to-ground}
{TRANSITION_COMPLETE_LF    ({CAMP})       ({KEEP})    -1  pool_edge  {IMAGEPATH}/keep-rim}

# this macro was defined at the top of this file
{CORNER_OVERLAY {KEEP} (!,{KEEP},!,C*,K*) {IMAGEPATH}/stone-post}

#enddef

#define AQUATIC:KEEP_CORNER_TRANSITION KEEP CASTLE WATER FLAG IMAGESTEM

# special crowded cases - It may be possible to write better rules to avoid this, but the bloat isn't too bad yet.
   [terrain_graphics]
        map="
, 2
3 , 3
, 1
. , .
, ."
        [tile]   
            pos=1
            type=!,{KEEP},{CASTLE},{WATER}
            set_no_flag={FLAG}-[nw,n,ne]
                [image]
                    layer=0
					base=36,36
                    name={IMAGESTEM}/keep-to-ground-nw.png~BLIT(terrain/{IMAGESTEM}/keep-to-ground-ne.png)~MASK(terrain/{IMAGESTEM}/mask-n.png)
                [/image]
        [/tile]  
        [tile]   
            pos=2
            type={CASTLE}
        [/tile]  
        [tile]   
            pos=3
            type={KEEP}
        [/tile]
   [/terrain_graphics]
   [terrain_graphics]
        map="
, 2
3 , 3
, 1
. , .
, ."
        [tile]   
            pos=1
            type=!,{KEEP},{CASTLE},{WATER}
            set_no_flag={FLAG}-[nw,n,ne]
                [image]
                    layer=0
					base=36,36
                    name={IMAGESTEM}/castle-to-ground-nw.png~BLIT(terrain/{IMAGESTEM}/castle-to-ground-ne.png)~MASK(terrain/{IMAGESTEM}/mask-n.png)
                [/image]
        [/tile]  
        [tile]   
            pos=2
            type={KEEP}
        [/tile]  
        [tile]   
            pos=3
            type={CASTLE}
        [/tile]
   [/terrain_graphics]
# end special cases

# land-based transitions
   [terrain_graphics]
        map="
, 2
3 , .
, 1
. , .
, ."
        [tile]   
            pos=1
            type=!,{KEEP},{CASTLE},{WATER}

            set_no_flag={FLAG}-[@R0,@R5]

                [image]
                    layer=0
		    base=36,36
                    name={IMAGESTEM}/keep-to-ground-@R5.png~MASK(terrain/{IMAGESTEM}/mask-@R0.png)
                [/image]
                [image]
                    layer=0
		    base=36,36
                    name={IMAGESTEM}/castle-to-ground-@R0.png~MASK(terrain/{IMAGESTEM}/mask-@R5.png)
                [/image]
        [/tile]  
        [tile]   
            pos=2
            type={CASTLE}
        [/tile]  
        [tile]   
            pos=3
            type={KEEP}
        [/tile]

        rotations=n,ne,se,s,sw,nw

   [/terrain_graphics]
   [terrain_graphics]
        map="
, 2
. , 3
, 1
. , .
, ."
        [tile]   
            pos=1
            type=!,{KEEP},{CASTLE},{WATER}
            set_no_flag={FLAG}-[@R0,@R1]
                [image]
                    layer=0
		    base=36,36
                    name={IMAGESTEM}/keep-to-ground-@R1.png~MASK(terrain/{IMAGESTEM}/mask-@R0.png)
#                    name={IMAGESTEM}/keep-to-ground-@R1.png~MASK(terrain/{IMAGESTEM}/mask-@R0.png)~BLIT(terrain/{IMAGESTEM}/castle-to-ground-@R0.png~MASK(terrain/{IMAGESTEM}/mask-@R1.png))
                [/image]
                [image]
                    layer=0
		    base=36,36
                    name={IMAGESTEM}/castle-to-ground-@R0.png~MASK(terrain/{IMAGESTEM}/mask-@R1.png)
                [/image]
        [/tile]  
        [tile]   
            pos=2
            type={CASTLE}
        [/tile]  
        [tile]   
            pos=3
            type={KEEP}  
        [/tile]

        rotations=n,ne,se,s,sw,nw

   [/terrain_graphics]

########################################################
# water-based transitions
   [terrain_graphics]
        map="
, 2
3 , .
, 1
. , .
, ."
        [tile]   
            pos=1
            type={WATER}
            set_no_flag={FLAG}-[@R0,@R5]

                [image]
                    layer=0
		    base=36,36
                    name={IMAGESTEM}/keep-to-water-@R5.png~MASK(terrain/{IMAGESTEM}/mask-@R0.png)
                [/image]
        [/tile]  
        [tile]   
            pos=2
            type={CASTLE}
        [/tile]  
        [tile]   
            pos=3
            type={KEEP}  
        [/tile]

        rotations=n,ne,se,s,sw,nw

   [/terrain_graphics]
   [terrain_graphics]
        map="
, 2
. , 3
, 1
. , .
, ."
        [tile]   
            pos=1
            type={WATER}
            set_no_flag={FLAG}-[@R0,@R1]
                [image]
                    layer=0
		    base=36,36
                    name={IMAGESTEM}/keep-to-water-@R1.png~MASK(terrain/{IMAGESTEM}/mask-@R0.png)
                [/image]
        [/tile]  
        [tile]   
            pos=2
            type={CASTLE}
        [/tile]  
        [tile]   
            pos=3
            type={KEEP} 
        [/tile]

        rotations=n,ne,se,s,sw,nw

   [/terrain_graphics]
#enddef

{KEEP_BASE               (KmeZ,KmZ,CmeZ,CmZ)                                    castle/troll-water/base-tile}
#{ANIMATED_WATER_15         KmeZ,KmZ,CmeZ,CmZ          ()      150                castle/troll-water/base-tile}

# Aquatic camp

{NEW:WALL             (KmeZ,CmeZ)                (!,C*,K*)                      castle/aquatic-camp/castle        }
{AQUATIC:CAMPS		   KmeZ		        CmeZ			 					    castle/aquatic-camp               }

# Aquatic castle

{NEW:WALL             CmZ               (!,C*,K*)                    			castle/aquatic-castle/castle      }
{NEW:WALL2            KmZ               !,Ket,!,C*,Ke*   (!,C*,K*)   			castle/aquatic-castle/keep-castle }
{NEW:WALL 		      KmZ 			    (!,C*,K*) 								castle/aquatic-castle/keep        }

# arid mountains

{OVERLAY_ROTATION_RESTRICTED2_F  MdaZ        (!,Xv,!,C*,K*,X*,Ql,Qx*)      base2  arid_mountains/desert-castle}
{OVERLAY_ROTATION_RESTRICTED_F   MdaZ        (!,Xv,!,C*,K*,X*,Ql,Qx*)      base2  arid_mountains/desert-castle}
{MOUNTAINS_2x4_NW_SE     MdaZ                                     18       base2  arid_mountains/desert_range3}
{MOUNTAINS_1x3_NW_SE     MdaZ                                     20       base2  arid_mountains/desert_range1}
{MOUNTAINS_1x3_SW_NE     MdaZ                                     20       base2  arid_mountains/desert_range2}
{MOUNTAINS_2x2           MdaZ                                     40       base2  arid_mountains/desert5}
{MOUNTAINS_2x2           MdaZ                                     30       base2  arid_mountains/desert6}

{MOUNTAIN_SINGLE_RANDOM  MdaZ                                              base2  arid_mountains/desert}

#This one is to fill any "gaps" there might be when next to castles or walls
{NEW:BASE                MdaZ                                                       hills/dry}
#{UTP_NEW:TRANSITION         (MdaZ,MdaZ^Xm)            (!,Md*,Mv,S*)          -166  arid_mountains/desert}
#{TRANSITION_COMPLETE_LF  (MdaZ,MdaZ^Xm)            (!,Md*,Mv,S*)             -166  arid_mountains/desert}
{TRANSITION_COMPLETE_L    (MdaZ,MdaZ^Xm)           (!,Md*,Mv,S*)              -166  arid_mountains/desert}

# Special Desert Mountain to Chasm Blend transition - the default mountain-chasm transition is white, looks terrible.
{TRANSITION_COMPLETE_LF  (Qx*,Ql*)                 (MdaZ,MdaZ^Xm)  2   transition3  arid_mountains/blend-from-chasm}

{TRANSITION_COMPLETE_LF  (MdaZ,MdaZ^Xm)             Ai,W*,S*     -165 non_submerged  arid_mountains/desert-to-water}

# Impassable peaks
{OVERLAY_LF              MdaZ^Xm                                1         clouds  mountains/cloud@V}
{PEAKS_1x2_SW_NE         MdaZ^Xm                               15         peaks   arid_mountains/peak_range1}
{PEAKS_LARGE             MdaZ^Xm                               25         peaks   arid_mountains/peak_large1}
{PEAKS_LARGE             MdaZ^Xm                               33         peaks   arid_mountains/peak_large2}
{OVERLAY_RANDOM_LF       MdaZ^Xm 								2 	      peaks   arid_mountains/peak}

# old villages
{NEW:VILLAGE             *^Vhco                                                 villages/human-city-old      }
{NEW:VILLAGE             *^Vdao                                                 villages/desert-old          }
{NEW:VILLAGE             *^Vhso                                                 villages/swampwater-old      }

#old tropical forest

{NEW:FOREST             H*^Fto,M*^Fto     (C*,K*,X*,Q*,W*,Ai,M*,*^V*,*^B*)    forest/tropical-old-small}
{NEW:FOREST             *^Fto             (C*,K*,X*,Q*,W*,Ai,M*,*^V*,*^B*)    forest/tropical-old}

#{OVERLAY_RANDOM *^Fto                                                             forest/tropical-old }

#old ford

#define UTP_NICER_FORD_TRANSITION TERRAINLIST ADJACENT LAYER IMAGESTEM MASKSTEM MASKIPF
    [terrain_graphics]
        map="
,  2
2,   2
,  1
2,   2
,  2"
        [tile]
            pos=1
            type={ADJACENT}
            set_no_flag=ford-@R0,ford-@R1,ford-@R2,ford-@R3,ford-@R4,ford-@R5
            [image]
                name={IMAGESTEM}.png~MASK(terrain/{MASKSTEM}-@R0.png~BLIT(terrain/{MASKSTEM}-@R1.png)~BLIT(terrain/{MASKSTEM}-@R2.png)~BLIT(terrain/{MASKSTEM}-@R3.png)~BLIT(terrain/{MASKSTEM}-@R4.png)~BLIT(terrain/{MASKSTEM}-@R5.png){MASKIPF})
                layer={LAYER}
            [/image]
        [/tile]
        [tile]
            pos=2
            type={TERRAINLIST}
        [/tile]

        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]
    [terrain_graphics]
        map="
,  2
.,   2
,  1
2,   2
,  2"
        [tile]
            pos=1
            type={ADJACENT}
            set_no_flag=ford-@R0,ford-@R1,ford-@R2,ford-@R3,ford-@R4
            [image]
                name={IMAGESTEM}.png~MASK(terrain/{MASKSTEM}-@R0.png~BLIT(terrain/{MASKSTEM}-@R1.png)~BLIT(terrain/{MASKSTEM}-@R2.png)~BLIT(terrain/{MASKSTEM}-@R3.png)~BLIT(terrain/{MASKSTEM}-@R4.png){MASKIPF})
                layer={LAYER}
            [/image]
        [/tile]
        [tile]
            pos=2
            type={TERRAINLIST}
        [/tile]

        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]
    [terrain_graphics]
        map="
,  2
.,   2
,  1
.,   2
,  2"
        [tile]
            pos=1
            type={ADJACENT}
            set_no_flag=ford-@R0,ford-@R1,ford-@R2,ford-@R3
            [image]
                name={IMAGESTEM}.png~MASK(terrain/{MASKSTEM}-@R0.png~BLIT(terrain/{MASKSTEM}-@R1.png)~BLIT(terrain/{MASKSTEM}-@R2.png)~BLIT(terrain/{MASKSTEM}-@R3.png){MASKIPF})
                layer={LAYER}
            [/image]
        [/tile]
        [tile]
            pos=2
            type={TERRAINLIST}
        [/tile]

        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]
    [terrain_graphics]
        map="
,  2
.,   2
,  1
.,   2
,  ."
        [tile]
            pos=1
            type={ADJACENT}
            set_no_flag=ford-@R0,ford-@R1,ford-@R2
            [image]
                name={IMAGESTEM}.png~MASK(terrain/{MASKSTEM}-@R0.png~BLIT(terrain/{MASKSTEM}-@R1.png)~BLIT(terrain/{MASKSTEM}-@R2.png){MASKIPF})
                layer={LAYER}
            [/image]
        [/tile]
        [tile]
            pos=2
            type={TERRAINLIST}
        [/tile]

        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]
    [terrain_graphics]
        map="
,  2
.,   2
,  1
.,   .
,  ."
        [tile]
            pos=1
            type={ADJACENT}
            set_no_flag=ford-@R0,ford-@R1
            [image]
                name={IMAGESTEM}.png~MASK(terrain/{MASKSTEM}-@R0.png~BLIT(terrain/{MASKSTEM}-@R1.png){MASKIPF})
                layer={LAYER}
            [/image]
        [/tile]
        [tile]
            pos=2
            type={TERRAINLIST}
        [/tile]

        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]
    [terrain_graphics]
        map="
,  2
.,   .
,  1
.,   .
,  ."
        [tile]
            pos=1
            type={ADJACENT}
            set_no_flag=ford-@R0
            [image]
                name={IMAGESTEM}.png~MASK(terrain/{MASKSTEM}-@R0.png{MASKIPF})
                layer={LAYER}
            [/image]
        [/tile]
        [tile]
            pos=2
            type={TERRAINLIST}
        [/tile]

        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]
#enddef

{UTP_NICER_FORD_TRANSITION       Wwfo           (!,Wwfo,!,W*,Sm,Xv,_off^_usr) -515                         water/ford-old        water/ocean-long-A01 "~O(0.48)"}

{UTP_NICER_FORD_TRANSITION       WufZ           (!,WufZ,!,W*,Sm,Xv,_off^_usr) -515                         water/ford-old        water/ocean-long-A01 "~O(0.48)"}

#undef UTP_NICER_FORD_TRANSITION

{OVERLAY_RANDOM_LF             Wwfo                                           -519  ford                    water/ford-old}

{ANIMATED_WATER_15            (Ww,Wwr,Wwf,Wwfo)   "~CS(40,0,-30)"              110                          water/coast-tropical}
{ANIMATED_WATER_15_TRANSITION  Ww,Wwf,Wwr,Wwfo  (!,Ww,Wwf,Wwr,!,W*,S*)        -553  "~CS(40,0,-30)"     110 water/coast-tropical-long}

# Underground water base terrains

#30% 30% 40%
{TERRAIN_BASE_P          WuoZ                                     30                 water/cave/deep-c3}
{TERRAIN_BASE_P          WuoZ                                     43                 water/cave/deep-c2}
{TERRAIN_BASE            WuoZ                                                        water/cave/deep-c}

#30% 30% 40%
{TERRAIN_BASE_P          WuwZ                                     30                 water/cave/shallow-c3}
{TERRAIN_BASE_P          WuwZ                                     43                 water/cave/shallow-c2}
{TERRAIN_BASE            WuwZ                                                        water/cave/shallow-c}

#33% 67%
{TERRAIN_BASE_P          WufZ                                    33                 water/cave/ford-c2}
{TERRAIN_BASE            WufZ                                                       water/cave/ford-c}

{TRANSITION_COMPLETE_L          WuwZ             (!,Ww,Wwf,Wwr,WuoZ,!,W*,S*)        -550                     water/cave/shallow-c}

{TRANSITION_COMPLETE_L          WuoZ             (!,Ww,Wwf,Wwr,!,W*,S*)        -550                          water/cave/deep-c}

# Lunar stuff
{TERRAIN_BASE_RANDOM      DlZ                   lunar/moon}

{TERRAIN_BASE_F          *^DlcZ                                             overlay  lunar/moon-crater}

#{TERRAIN_BASE 		      DlZ^DlcZ              lunar/moon-crater}

{TERRAIN_BASE_RANDOM      HlZ                   lunar/moon-hills}
 
{TERRAIN_BASE_P  		  MlZ                   lunar/moon-mountain-peak1    25}
{TERRAIN_BASE_P  		  MlZ                   lunar/moon-mountain-peak2    33}
{TERRAIN_BASE_P  		  MlZ                   lunar/moon-mountain-peak3    50}
{TERRAIN_BASE       	  MlZ                   lunar/moon-mountains}

{TRANSITION_COMPLETE_L          MlZ            (!,Mt,Qxu)                  -160               lunar/moon-mountains}
{TRANSITION_COMPLETE_L          HlZ            (!,Ht,Qxu)                  -190               lunar/moon-hills}
{TRANSITION_COMPLETE_L          DlZ            (!,R*,DlZ)                  -350               lunar/moon}

# Space stuff
# need to rework those

#stars background randomization
#{TERRAIN_BASE    Wso      space/space																								 }
#{TERRAIN_BASE_P  Wso  10  space/stars6 																								 }
#{TERRAIN_BASE_P  Wso  10  space/stars5:1100,space/stars5a:300,space/stars5:1300,space/stars5a:100 									 }
#{TERRAIN_BASE_P  Wso  10  space/stars4:800,space/stars4a:200,space/stars4:400,space/stars4b:100,space/stars4:600					 }
#{TERRAIN_BASE_P  Wso  10  space/stars3:1000,space/stars3a:200,space/stars3:1200,space/stars3e:200,space/stars3:200					 }
#{TERRAIN_BASE_P  Wso  10  space/stars3:500,space/stars3b:100,space/stars3c:100,space/stars3b:100,space/stars3:600					 }
#{TERRAIN_BASE_P  Wso  10  space/stars2:800,space/stars2a:100,space/stars2b:100,space/stars2c:100,space/stars2b:100,space/stars2a:100 }
#{TERRAIN_BASE_P  Wso  10  space/stars1:1100,space/stars1a:300 																	     }
#{TERRAIN_BASE_P  Wso  10  space/stars1:400,space/stars1b:200,space/stars1:800 													     }
#{TERRAIN_BASE_P  Wso  10  space/stars1:1200,space/stars1c:200																		 }
#{TERRAIN_BASE_P  Wso  10  space/stars1:1300,space/stars1d:100 																	     }

#the asteroids
#{OVERLAY_RANDOM_L Wsaf                   -320                space/asteroid-field    }

#should get some variations, an blue sun, an red giant, an white dwarf, an oranger hued one and so on.
#{OVERLAY_B 	   *^Mssb                     100                space/sunn            }

#the tiny sattelite
#{OVERLAY_B               *^Vsst           space/stars-sat }
#{NEW:VILLAGE   *^Vsst     space/stars-sat:400,space/stars-satsp1:100,space/stars-satsp2:100,space/stars-satsp3:100,space/stars-sat:700,space/stars-satref1:100,space/stars-satref2:100,space/stars-satref3:100,space/stars-sat:400,space/stars-satspa1:100,space/stars-satspa2:100,space/stars-satspa3:100}

#nebula cloud
#{TERRAIN_BASE_RANDOM     Ssnc                                                       space/starcloud}

#{TRANSITION_COMPLETE_L  (Ssnc)       (R*,W*,D*,Xv,_off^_usr)        -310            space/starcloud-ctrans}
#{TRANSITION_COMPLETE_L   Ssnc        (!,Ds,W*,S*,Ai,Q*)             -510            space/starcloud-ctrans}

# Waterfalls

# First must make sure that chasm bridges stop waterfalls where they touch the edge of the chasm.
	[terrain_graphics]
		[tile]
			x=0
			y=0
			type=Qxu^Bs|
			set_flag=waterfall-n,waterfall-s
		[/tile]
	[/terrain_graphics]
	[terrain_graphics]
		[tile]
			x=0
			y=0
			type=Qxu^Bs/
			set_flag=waterfall-ne,waterfall-sw
		[/tile]
	[/terrain_graphics]
	[terrain_graphics]
		[tile]
			x=0
			y=0
			type=Qxu^Bs\
			set_flag=waterfall-nw,waterfall-se.png
		[/tile]
	[/terrain_graphics]

# The actual waterfalls
	[terrain_graphics]
		map="
2
, 1
3
, 2"
		[tile]
			pos=1
			type=WuwZ,WuoZ,Ww,Wo
		[/tile]
		[tile]
			pos=2
			type=Q*
		[/tile]
		[tile]
			pos=3
			type=Qxu,Qf
			no_flag=waterfall-ne
		[/tile]
		[image]
			name=water/cave/waterfall-ne-se-n.png
		[/image]
	[/terrain_graphics]
	[terrain_graphics]
		map="
*
, 2
1
, 3
2"
		[tile]
			pos=1
			type=WuwZ,WuoZ,Ww,Wo
		[/tile]
		[tile]
			pos=2
			type=Q*
		[/tile]
		[tile]
			pos=3
			type=Qxu,Qf
			no_flag=waterfall-nw
		[/tile]
		[image]
			name=water/cave/waterfall-nw-n-sw.png
		[/image]
	[/terrain_graphics]
	[terrain_graphics]
		map="
*
, 3
2
, 1"
		[tile]
			pos=1
			type=WuwZ,WuoZ,Ww,Wo
		[/tile]
		[tile]
			pos=2
			type=Qxu,Qf
			no_flag=waterfall-se
		[/tile]
		[tile]
			pos=3
			type=Q*
			no_flag=waterfall-s
		[/tile]
		[image]
			name=water/cave/waterfall-se-s.png
		[/image]
	[/terrain_graphics]
	[terrain_graphics]
		map="
2
, 1
3"
		[tile]
			pos=1
			type=WuwZ,WuoZ,Ww,Wo
		[/tile]
		[tile]
			pos=2
			type=Qxu,Qf
			no_flag=waterfall-se
		[/tile]
		[tile]
			pos=3
			type=!,Q*
		[/tile]
		[image]
			name=water/cave/waterfall-cw-se.png
		[/image]
	[/terrain_graphics]
	[terrain_graphics]
		map="
*
, 3
2
, 1"
		[tile]
			pos=1
			type=WuwZ,WuoZ,Ww,Wo
		[/tile]
		[tile]
			pos=2
			type=Qxu,Qf
			no_flag=waterfall-se
		[/tile]
		[tile]
			pos=3
			type=!,Q*
		[/tile]
		[image]
			name=water/cave/waterfall-ccw-se.png
		[/image]
	[/terrain_graphics]
	[terrain_graphics]
		map="
*
, 2
3
, 1"
		[tile]
			pos=1
			type=WuwZ,WuoZ,Ww,Wo
		[/tile]
		[tile]
			pos=2
			type=Qxu,Qf
			no_flag=waterfall=s
		[/tile]
		[tile]
			pos=3
			type=!,Q*
		[/tile]
		[image]
			name=water/cave/waterfall-cw-s.png
		[/image]
	[/terrain_graphics]
	[terrain_graphics]
		map="
2
,  3
1"
		[tile]
			pos=1
			type=WuwZ,WuoZ,Ww,Wo
		[/tile]
		[tile]
			pos=2
			type=Qxu,Qf
			no_flag=waterfall-s
		[/tile]
		[tile]
			pos=3
			type=!,Q*
		[/tile]
		[image]
			name=water/cave/waterfall-ccw-s.png
		[/image]
	[/terrain_graphics]
	[terrain_graphics]
		map="
1
,  2
3"
		[tile]
			pos=1
			type=WuwZ,WuoZ,Ww,Wo
		[/tile]
		[tile]
			pos=2
			type=Qxu,Qf
			no_flag=waterfall-nw
		[/tile]
		[tile]
			pos=3
			type=!,Q*
		[/tile]
		[image]
			name=water/cave/waterfall-cw-nw.png
		[/image]
	[/terrain_graphics]
	[terrain_graphics]
		map="
1
,  2
1"
		[tile]
			pos=1
			type=WuwZ,WuoZ,Ww,Wo
		[/tile]
		[tile]
			pos=2
			type=Qxu,Qf
			no_flag=waterfall-sw
		[/tile]
		[image]
			name=water/cave/waterfall-sw-nw.png
		[/image]
	[/terrain_graphics]
	[terrain_graphics]
		map="
, 1
2,
, 3"
		[tile]
			pos=1
			type=WuwZ,WuoZ,Ww,Wo
		[/tile]
		[tile]
			pos=2
			type=Qxu,Qf
			no_flag=waterfall-ne
		[/tile]
		[tile]
			pos=3
			type=!,Q*
		[/tile]
		[image]
			name=water/cave/waterfall-cw-ne.png
		[/image]
	[/terrain_graphics]
	[terrain_graphics]
		map="
*
, 2
1"
		[tile]
			pos=1
			type=WuwZ,WuoZ,Ww,Wo
		[/tile]
		[tile]
			pos=2
			type=Qxu,Qf
			no_flag=waterfall-sw
		[/tile]
		[image]
			name=water/cave/waterfall-sw.png
		[/image]
	[/terrain_graphics]
	[terrain_graphics]
		map="
*
, 2
1
, 3"
		[tile]
			pos=1
			type=WuwZ,WuoZ,Ww,Wo
		[/tile]
		[tile]
			pos=2
			type=Qxu,Qf
			no_flag=waterfall-sw
		[/tile]
		[tile]
			pos=3
			type=!,Q*
		[/tile]
		[image]
			name=water/cave/waterfall-ccw-sw.png
		[/image]
	[/terrain_graphics]
	[terrain_graphics]
		map="
.
, 1
3,  4
, 2"
		[tile]
			pos=1
			type=WuwZ,WuoZ,Ww,Wo
		[/tile]
		[tile]
			pos=2
			type=Qxu,Qf
			no_flag=waterfall-n
		[/tile]
		[tile]
			pos=3
			type=!,Q*
		[/tile]
		[tile]
			pos=4
			type=Q*
		[/tile]
		[image]
			name=water/cave/waterfall-cw-n-ne.png
		[/image]
	[/terrain_graphics]
	[terrain_graphics]
		map="
1
,  1
2"
		[tile]
			pos=1
			type=WuwZ,WuoZ,Ww,Wo
		[/tile]
		[tile]
			pos=2
			type=Qxu,Qf
			no_flag=waterfall-ne
		[/tile]
		[image]
			name=water/cave/waterfall-n-ne.png
		[/image]
	[/terrain_graphics]
	[terrain_graphics]
		map="
.
, 1
3,  3
, 2"
		[tile]
			pos=1
			type=WuwZ,WuoZ,Ww,Wo
		[/tile]
		[tile]
			pos=2
			type=Qxu,Qf
			no_flag=waterfall-n
		[/tile]
		[tile]
			pos=3
			type=!,Q*
		[/tile]
		[image]
			name=water/cave/waterfall-n.png
		[/image]
	[/terrain_graphics]
	[terrain_graphics]
		map="
.
, 1
2,  3
, 4"
		[tile]
			pos=1
			type=WuwZ,WuoZ,Ww,Wo
		[/tile]
		[tile]
			pos=2
			type=Qxu,Qf
			no_flag=waterfall-ne
		[/tile]
		[tile]
			pos=3
			type=!,Wuw,Wuo,Ww,Wo
		[/tile]
		[tile]
			pos=4
			type=Qxu,Qf
			no_flag=waterfall-n
		[/tile]
		[image]
			name=water/cave/waterfall-cw-nw-n.png
		[/image]
	[/terrain_graphics]

# Water surface decorations
# first randomly mark a group of tiles to not have overlays
{TERRAIN_BASE_PF (WuwZ,WufZ,WuoZ) 35 overlay blank}

#define UTP_DROP_ONE_OVERLAY INTERVAL PROB
    [terrain_graphics]
        map="
1
,2
2
,1
"
        [tile]
            pos=1
            type=WuwZ,WufZ,WuoZ
            set_flag=overlay
            no_flag=overlay
        [/tile]
        [tile]
            pos=2
            type=WuwZ,WufZ,WuoZ
            # flag deliberately left out
        [/tile]
        probability={PROB}
        [image]
            name="blank.png:{INTERVAL},drop-1/drop-1-01.png:90,drop-1/drop-1-02.png:90,drop-1/drop-1-03.png:90,drop-1/drop-1-04.png:90,drop-1/drop-1-05.png:90,drop-1/drop-1-06.png:90,drop-1/drop-1-07.png:90,drop-1/drop-1-09.png:90,drop-1/drop-1-10.png:90,drop-1/drop-1-11.png:90,drop-1/drop-1-12.png:90,drop-1/drop-1-13.png:90,drop-1/drop-1-14.png:90,drop-1/drop-1-15.png:90,drop-1/drop-1-16.png:90,drop-1/drop-1-17.png:90"
        [/image]
    [/terrain_graphics]
#enddef

	{UTP_DROP_ONE_OVERLAY 4140 17}
	{UTP_DROP_ONE_OVERLAY 3910 20}
	{UTP_DROP_ONE_OVERLAY 3720 25}
	{UTP_DROP_ONE_OVERLAY 3510 33}
	{UTP_DROP_ONE_OVERLAY 3340 50}
	{UTP_DROP_ONE_OVERLAY 3200 100}	

#massive stone gate

#not_define UTP_GATE_FRAGMENT_OVERLAY TERRAIN LAYER FLAG IMAGESTEM X_SHIFT
    #[terrain_graphics]
        #map="
#, *
#* , *
#, 1
#* , *
#, *"

        #[tile]
            #pos=1
            #type={TERRAIN}
            #set_no_flag={FLAG}
        #[/tile]

        #probability=100
        #[image]
            #name="../misc/blank-hex.png~BLIT(terrain/"+{IMAGESTEM}+".png~CROP("+{X_SHIFT}+",0,36,72),"+{X_SHIFT}+",0)"
            #variations=";2;3;4;5;6;7;8;9;10;11"
            #layer={LAYER}
            #base=90,144
            #center=90,144
        #[/image]
    #[/terrain_graphics]
#not_enddef

#not_define UTP_GATE_OVERLAY TERRAIN WEST_LAYER EAST_LAYER IMAGESTEM
    #{UTP_GATE_FRAGMENT_OVERLAY ({TERRAIN}) ({WEST_LAYER})  gate-west {IMAGESTEM} 0 }
    #{UTP_GATE_FRAGMENT_OVERLAY ({TERRAIN}) ({EAST_LAYER})  gate-east {IMAGESTEM} 36}
#not_enddef	

#define UTP_WALL_MOUNTED_BANNER_OVERLAY _TILE_STR _IMAGE
    [terrain_graphics]
        map="
, *
* , *
, 1
* , *
, *"
        [tile]
            pos=1
            type={_TILE_STR}
        [/tile]
        probability=100
        [image]
            layer=0
            name={_IMAGE}
            base=90,144
            center=80,152
        [/image]
    [/terrain_graphics]
#enddef

#define UTP_WALL_FLAGS_NW_N
"wall-s,wall-se" #enddef

#define UTP_WALL_FLAGS_N_NE
"wall-s,wall-sw" #enddef

# From IMAGE_NW_N
#define UTP_WALL_OVERLAY_IMAGE_SE _BUILDER _IMAGESTEM
    [image]
        name={BUILD_IMAGE {_BUILDER} {_IMAGESTEM} -se}
        base=81,144
        center=90,144
    [/image]
#enddef

# From IMAGE_N_NE
#define UTP_WALL_OVERLAY_IMAGE_SW _BUILDER _IMAGESTEM
    [image]
        name={BUILD_IMAGE {_BUILDER} {_IMAGESTEM} -sw}
        base=99,144
        center=90,144
    [/image]
#enddef

#define UTP_WALL_OVERLAY_SE _TERRAINLIST _ADJACENT _IMAGESTEM
    [terrain_graphics]
        map="
,  *
2,   *
,  1
*,   *
,  *"
        [tile]
            pos=1
            type={_ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={_TERRAINLIST}
            set_no_flag=wall-moss-se
        [/tile]
        {UTP_WALL_OVERLAY_IMAGE_SE IMAGE_SINGLE {_IMAGESTEM}}
    [/terrain_graphics]
#enddef

#define UTP_WALL_OVERLAY_SW _TERRAINLIST _ADJACENT _IMAGESTEM
    [terrain_graphics]
        map="
,  *
*,   2
,  1
*,   *
,  *"
        [tile]
            pos=1
            type={_ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={_TERRAINLIST}
            set_no_flag=wall-moss-sw
        [/tile]
        {UTP_WALL_OVERLAY_IMAGE_SW IMAGE_SINGLE {_IMAGESTEM}}
    [/terrain_graphics]
#enddef

#define UTP_TERRAIN_P _P
    [+terrain_graphics]
        probability={_P}
    [/terrain_graphics]
#enddef

{UTP_WALL_MOUNTED_BANNER_OVERLAY *^EbuZ ../scenery/banner-uria-wall.png       }
{UTP_WALL_MOUNTED_BANNER_OVERLAY *^EbyZ ../scenery/banner-yechnagoth-wall.png }

{UTP_WALL_OVERLAY_SE          *^Emo\ (!,Xo*)        wall/moss3} {UTP_TERRAIN_P 33}
{UTP_WALL_OVERLAY_SE          *^Emo\ (!,Xo*)        wall/moss2} {UTP_TERRAIN_P 50}
{UTP_WALL_OVERLAY_SE          *^Emo\ (!,Xo*)        wall/moss}

{UTP_WALL_OVERLAY_SW          *^Emo/ (!,Xo*)        wall/moss3} {UTP_TERRAIN_P 33}
{UTP_WALL_OVERLAY_SW          *^Emo/ (!,Xo*)        wall/moss2} {UTP_TERRAIN_P 50}
{UTP_WALL_OVERLAY_SW          *^Emo/ (!,Xo*)        wall/moss}

# Canyon terrain graphics

#define UTP_TRANS_0 TERRAIN
    [tile]
        pos=2
        type={TERRAIN}
        no_flag=canyon-nt-@R3
    [/tile]
#enddef
#define UTP_TRANS_1 TERRAIN
    [tile]
        pos=3
        type={TERRAIN}
        no_flag=canyon-nt-@R4
    [/tile]
#enddef
#define UTP_TRANS_2 TERRAIN
    [tile]
        pos=4
        type={TERRAIN}
        no_flag=canyon-nt-@R5
    [/tile]
#enddef
#define UTP_TRANS_3 TERRAIN
    [tile]
        pos=5
        type={TERRAIN}
        no_flag=canyon-nt-@R0
    [/tile]
#enddef
#define UTP_TRANS_4 TERRAIN
    [tile]
        pos=6
        type={TERRAIN}
        no_flag=canyon-nt-@R1
    [/tile]
#enddef
#define UTP_TRANS_5 TERRAIN
    [tile]
        pos=7
        type={TERRAIN}
        no_flag=canyon-nt-@R2
    [/tile]
#enddef

#define UTP_CANYON TERRAIN IMAGESTEM

    [terrain_graphics]
        map="
1,
,  3
2,   1
,  .
1,   ."
        [tile]
            pos=1
            type={TERRAIN}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN}
            set_flag=canyon-nt-@R1
        [/tile]
        [tile]
            pos=3
            type={TERRAIN}
            set_flag=canyon-nt-@R4
        [/tile]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  2
7,   3
,  1
6,   4
,  5"
        {UTP_TRANS_0 {TERRAIN}}
        {UTP_TRANS_1 {TERRAIN}}
        {UTP_TRANS_2 {TERRAIN}}
        {UTP_TRANS_3 {TERRAIN}}
        {UTP_TRANS_4 {TERRAIN}}
        {UTP_TRANS_5 {TERRAIN}}
        [tile]
            pos=1
            type={TERRAIN}
            [image]
                name={IMAGESTEM}-all.png
            [/image]
            no_flag="overlay"
            set_flag="overlay"
        [/tile]
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  2
.,   3
,  1
6,   4
,  5"
        {UTP_TRANS_0 {TERRAIN}}
        {UTP_TRANS_1 {TERRAIN}}
        {UTP_TRANS_2 {TERRAIN}}
        {UTP_TRANS_3 {TERRAIN}}
        {UTP_TRANS_4 {TERRAIN}}
        [tile]
            pos=2
            type={TERRAIN}
        [/tile]
        [tile]
            pos=1
            type={TERRAIN}
            [image]
                name={IMAGESTEM}-@R0-@R1-@R2-@R3-@R4.png
            [/image]
            no_flag=overlay
            set_flag=overlay,canyon-nt-@R5
        [/tile]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  2
.,   3
,  1
.,   4
,  5"
        {UTP_TRANS_0 {TERRAIN}}
        {UTP_TRANS_1 {TERRAIN}}
        {UTP_TRANS_2 {TERRAIN}}
        {UTP_TRANS_3 {TERRAIN}}
        [tile]
            pos=2
            type={TERRAIN}
        [/tile]
        [tile]
            pos=1
            type={TERRAIN}
            [image]
                name={IMAGESTEM}-@R0-@R1-@R2-@R3.png
            [/image]
            no_flag=overlay
            set_flag=overlay,canyon-nt-@R4,canyon-nt-@R5
        [/tile]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  2
.,   3
,  1
6,   4
,  ."
        {UTP_TRANS_0 {TERRAIN}}
        {UTP_TRANS_1 {TERRAIN}}
        {UTP_TRANS_2 {TERRAIN}}
        {UTP_TRANS_4 {TERRAIN}}
        [tile]
            pos=2
            type={TERRAIN}
        [/tile]
        [tile]
            pos=1
            type={TERRAIN}
            [image]
                #layer=1000
                name={IMAGESTEM}-@R0-@R1-@R2-@R4.png
            [/image]
            no_flag=overlay
            set_flag=overlay,canyon-nt-@R3,canyon-nt-@R5
        [/tile]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  2
.,   3
,  1
.,   4
,  ."
        {UTP_TRANS_0 {TERRAIN}}
        {UTP_TRANS_1 {TERRAIN}}
        {UTP_TRANS_2 {TERRAIN}}
        [tile]
            pos=2
            type={TERRAIN}
        [/tile]
        [tile]
            pos=1
            type={TERRAIN}
            [image]
                name={IMAGESTEM}-@R0-@R1-@R2.png
            [/image]
            no_flag=overlay
            set_flag=overlay,canyon-nt-@R3,canyon-nt-@R4,canyon-nt-@R5
        [/tile]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  2
.,   3
,  1
6,   .
,  ."
        {UTP_TRANS_0 {TERRAIN}}
        {UTP_TRANS_1 {TERRAIN}}
        {UTP_TRANS_4 {TERRAIN}}
        [tile]
            pos=2
            type={TERRAIN}
        [/tile]
        [tile]
            pos=1
            type={TERRAIN}
            [image]
                name={IMAGESTEM}-@R0-@R1-@R4.png
            [/image]
            no_flag="overlay"
            set_flag=overlay,canyon-nt-@R2,canyon-nt-@R3,canyon-nt-@R5
        [/tile]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  2
.,   3
,  1
.,   .
,  5"
        {UTP_TRANS_0 {TERRAIN}}
        {UTP_TRANS_1 {TERRAIN}}
        {UTP_TRANS_3 {TERRAIN}}
        [tile]
            pos=2
            type={TERRAIN}
        [/tile]
        [tile]
            pos=1
            type={TERRAIN}
            [image]
                name={IMAGESTEM}-@R0-@R1-@R3.png
            [/image]
            no_flag=overlay
            set_flag=overlay,canyon-nt-@R2,canyon-nt-@R4,canyon-nt-@R5
        [/tile]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  2
.,   3
,  1
.,   .
,  ."
        {UTP_TRANS_0 {TERRAIN}}
        {UTP_TRANS_1 {TERRAIN}}
        [tile]
            pos=2
            type={TERRAIN}
        [/tile]
        [tile]
            pos=1
            type={TERRAIN}
            [image]
                name={IMAGESTEM}-@R0-@R1.png
            [/image]
            no_flag="overlay"
            set_flag=overlay,canyon-nt-@R2,canyon-nt-@R3,canyon-nt-@R4,canyon-nt-@R5
        [/tile]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  2
.,   .
,  1
.,   .
,  5"
        {UTP_TRANS_0 {TERRAIN}}
        {UTP_TRANS_3 {TERRAIN}}
        [tile]
            pos=2
            type={TERRAIN}
        [/tile]
        [tile]
            pos=1
            type={TERRAIN}
            [image]
                name={IMAGESTEM}-@R0-@R3.png
            [/image]
            no_flag="overlay"
            set_flag=overlay,canyon-nt-@R1,canyon-nt-@R2,canyon-nt-@R4,canyon-nt-@R5
        [/tile]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  2
.,   .
,  1
.,   4
,  ."
        {UTP_TRANS_0 {TERRAIN}}
        {UTP_TRANS_2 {TERRAIN}}
        [tile]
            pos=2
            type={TERRAIN}
        [/tile]
        [tile]
            pos=1
            type={TERRAIN}
            [image]
                #layer=1000
                name={IMAGESTEM}-@R0-@R2.png
            [/image]
            no_flag="overlay"
            set_flag=overlay,canyon-nt-@R1,canyon-nt-@R3,canyon-nt-@R4,canyon-nt-@R5
        [/tile]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  2
.,   .
,  1
.,   .
,  ."
        {UTP_TRANS_0 {TERRAIN}}
        [tile]
            pos=2
            type={TERRAIN}
        [/tile]
        [tile]
            pos=1
            type={TERRAIN}
            [image]
                name={IMAGESTEM}-@R0.png
            [/image]
            no_flag="overlay"
            set_flag=overlay,canyon-nt-@R1,canyon-nt-@R2,canyon-nt-@R3,canyon-nt-@R4,canyon-nt-@R5
        [/tile]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  .
.,   .
,  1
.,   .
,  ."
        [tile]
            pos=1
            type={TERRAIN}
            [image]
                name={IMAGESTEM}.png
            [/image]
            no_flag="overlay"
            set_flag=overlay,canyon-nt-@R0,canyon-nt-@R1,canyon-nt-@R2,canyon-nt-@R3,canyon-nt-@R4,canyon-nt-@R5
        [/tile]
    [/terrain_graphics]

#enddef

{UTP_CANYON            *^YcZ                   canyon/canyon}

# burned village
{OVERLAY_RANDOM_L      *^Evbd       -1         embellishments/village-human-burned }

# SXRPG cliffs

#define UTP_PATH_0 TERRAIN_PATTERN JOIN_PATTERN IMAGESTEM BASE
    [terrain_graphics]
        map="
,  *
*,   *
,  1
*,   *
,  *"
        [tile]
            pos=1
            type={TERRAIN_PATTERN}
            no_flag=path
            set_flag=path
        [/tile]
        [image]
        layer=-1
            name={IMAGESTEM}.png
            base={BASE}
        [/image]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]
#enddef

#define UTP_PATH_1 TERRAIN_PATTERN JOIN_PATTERN IMAGESTEM BASE
    [terrain_graphics]
        map="
,  2
*,   *
,  1
*,   *
,  *"
        [tile]
            pos=1
            type={TERRAIN_PATTERN}
            no_flag=path
            set_flag=path
        [/tile]
        [tile]
            pos=2
            type={JOIN_PATTERN}
        [/tile]
        [image]
        layer=-1
            name={IMAGESTEM}-@R0.png
            base={BASE}
        [/image]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]
#enddef

#define UTP_PATH_2 TERRAIN_PATTERN JOIN_PATTERN IMAGESTEM BASE
    [terrain_graphics]
        map="
,  2
*,   *
,  1
*,   *
,  2"
        [tile]
            pos=1
            type={TERRAIN_PATTERN}
            no_flag=path
            set_flag=path
        [/tile]
        [tile]
            pos=2
            type={JOIN_PATTERN}
        [/tile]
        [image]
        layer=-1
            name={IMAGESTEM}-@R0-@R3.png
            base={BASE}
        [/image]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  2
*,   *
,  1
*,   2
,  *"
        [tile]
            pos=1
            type={TERRAIN_PATTERN}
            no_flag=path
            set_flag=path
        [/tile]
        [tile]
            pos=2
            type={JOIN_PATTERN}
        [/tile]
        [image]
        layer=-1
            name={IMAGESTEM}-@R0-@R2.png
            base={BASE}
        [/image]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  2
*,   2
,  1
*,   *
,  *"
        [tile]
            pos=1
            type={TERRAIN_PATTERN}
            no_flag=path
            set_flag=path
        [/tile]
        [tile]
            pos=2
            type={JOIN_PATTERN}
        [/tile]
        [image]
        layer=-1
            name={IMAGESTEM}-@R0-@R1.png
            base={BASE}
        [/image]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]
#enddef

#define UTP_PATH_3 TERRAIN_PATTERN JOIN_PATTERN IMAGESTEM BASE
    [terrain_graphics]
        map="
,  2
*,   *
,  1
2,   2
,  *"
        [tile]
            pos=1
            type={TERRAIN_PATTERN}
            no_flag=path
            set_flag=path
        [/tile]
        [tile]
            pos=2
            type={JOIN_PATTERN}
        [/tile]
        [image]
        layer=-1
            name={IMAGESTEM}-@R0-@R2-@R4.png
            base={BASE}
        [/image]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  2
*,   *
,  1
*,   2
,  2"
        [tile]
            pos=1
            type={TERRAIN_PATTERN}
            no_flag=path
            set_flag=path
        [/tile]
        [tile]
            pos=1
            no_flag=nojoin-@R2
        [/tile]
        [tile]
            pos=2
            type={JOIN_PATTERN}
        [/tile]
        [image]
        layer=-1
            name={IMAGESTEM}-@R0-@R2-@R3.png
            base={BASE}
        [/image]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  2
*,   *
,  1
2,   *
,  2"
        [tile]
            pos=1
            type={TERRAIN_PATTERN}
            no_flag=path
            set_flag=path
        [/tile]
        [tile]
            pos=1
            no_flag=nojoin-@R4
        [/tile]
        [tile]
            pos=2
            type={JOIN_PATTERN}
        [/tile]
        [image]
        layer=-1
            name={IMAGESTEM}-@R0-@R3-@R4.png
            base={BASE}
        [/image]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]
#enddef

#define UTP_PATH_4 TERRAIN_PATTERN JOIN_PATTERN IMAGESTEM BASE
    [terrain_graphics]
        map="
,  2
*,   2
,  1
2,   *
,  2"
        [tile]
            pos=1
            type={TERRAIN_PATTERN}
            no_flag=path
            set_flag=path
        [/tile]
        [tile]
            pos=2
            type={JOIN_PATTERN}
        [/tile]
        [image]
        layer=-1
            name={IMAGESTEM}-@R0-@R1-@R3-@R4.png
            base={BASE}
        [/image]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]
#enddef

#define UTP_FIX_JUNCTIONS TERRAIN_PATTERN JOIN_PATTERN IMAGESTEM
    [terrain_graphics]
        map="
2
, 1
2,  2
, *
2"
        [tile]
            pos=1
            type={TERRAIN_PATTERN}
            set_flag=nojoin-@R4
        [/tile]
        [tile]
            pos=2
            type={JOIN_PATTERN}
        [/tile]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]

    [terrain_graphics]
        map="
2
, 2
1,  2
, *
2"
        [tile]
            pos=1
            type={TERRAIN_PATTERN}
            set_flag=nojoin-@R1
        [/tile]
        [tile]
            pos=2
            type={JOIN_PATTERN}
        [/tile]
        rotations=n,ne,se,s,sw,nw
    [/terrain_graphics]
#enddef

#define UTP_PATH_OVERLAY TERRAIN_PATTERN JOIN_PATTERN IMAGESTEM BASE
{UTP_FIX_JUNCTIONS ({TERRAIN_PATTERN}) ({JOIN_PATTERN}) {IMAGESTEM}}
{UTP_PATH_4 ({TERRAIN_PATTERN}) ({JOIN_PATTERN}) {IMAGESTEM} {BASE}}
{UTP_PATH_3 ({TERRAIN_PATTERN}) ({JOIN_PATTERN}) {IMAGESTEM} {BASE}}
{UTP_PATH_2 ({TERRAIN_PATTERN}) ({JOIN_PATTERN}) {IMAGESTEM} {BASE}}
{UTP_PATH_1 ({TERRAIN_PATTERN}) ({JOIN_PATTERN}) {IMAGESTEM} {BASE}}
{UTP_PATH_0 ({TERRAIN_PATTERN}) ({JOIN_PATTERN}) {IMAGESTEM} {BASE}}
#enddef

#define PATH TERRAIN_PATTERN JOIN_PATTERN IMAGESTEM
{UTP_PATH_OVERLAY ({TERRAIN_PATTERN}) ({JOIN_PATTERN}) {IMAGESTEM} 90,144}
#enddef

{DISABLE_BASE_TRANSITIONS  *^Qc}

{NEW:WALL  *^Qc  (!,*^Qc)  cliffs/cliff2}

{PATH *^QcnZ *^Qc* cliffs/cliff1}
{PATH *^QcsZ *^Qc* cliffs/cliff2}

#define SIMAGE_NW IMAGESTEM
    [image]
        name={IMAGESTEM}-nw
        base=63,144
    [/image]
#enddef
#define SIMAGE_N IMAGESTEM
    [image]
        name={IMAGESTEM}-n
        base=90,144
    [/image]
#enddef
#define SIMAGE_NE IMAGESTEM
    [image]
        name={IMAGESTEM}-ne
        base=117,144
    [/image]
#enddef
#define SIMAGE_SE IMAGESTEM
    [image]
        name={IMAGESTEM}-se
        base=117,182
    [/image]
#enddef
#define SIMAGE_S IMAGESTEM
    [image]
        name={IMAGESTEM}-s
        base=90,196
    [/image]
#enddef
#define SIMAGE_SW IMAGESTEM
    [image]
        name={IMAGESTEM}-sw
        base=63,182
    [/image]
#enddef
#define SIMAGE_NW_N IMAGESTEM
    [image]
        name={IMAGESTEM}-nw-n
        base=81,144
    [/image]
#enddef
#define SIMAGE_N_NE IMAGESTEM
    [image]
        name={IMAGESTEM}-n-ne
        base=99,144
    [/image]
#enddef
#define SIMAGE_NE_SE IMAGESTEM
    [image]
        name={IMAGESTEM}-ne-se
        base=108,182
    [/image]
#enddef
#define SIMAGE_SE_S IMAGESTEM
    [image]
        name={IMAGESTEM}-se-s
        base=99,182
    [/image]
#enddef
#define SIMAGE_S_SW IMAGESTEM
    [image]
        name={IMAGESTEM}-s-sw
        base=81,182
    [/image]
#enddef
#define SIMAGE_SW_NW IMAGESTEM
    [image]
        name={IMAGESTEM}-sw-nw
        base=72,182
    [/image]
#enddef
#define SIMAGE_NW_N_NE IMAGESTEM
    [image]
        name={IMAGESTEM}-nw-n-ne
        base=90,144
    [/image]
#enddef
#define SIMAGE_N_NE_SE IMAGESTEM
    [image]
        name={IMAGESTEM}-n-ne-se-bg
        base=99,144
    [/image]
    [image]
        name={IMAGESTEM}-n-ne-se-fg
        base=108,182
    [/image]
#enddef
#define SIMAGE_NE_SE_S IMAGESTEM
    [image]
        name={IMAGESTEM}-ne-se-s
        base=99,182
    [/image]
#enddef
#define SIMAGE_SE_S_SW IMAGESTEM
    [image]
        name={IMAGESTEM}-se-s-sw
        base=90,182
    [/image]
#enddef
#define SIMAGE_S_SW_NW IMAGESTEM
    [image]
        name={IMAGESTEM}-s-sw-nw
        base=81,182
    [/image]
#enddef
#define SIMAGE_SW_NW_N IMAGESTEM
    [image]
        name={IMAGESTEM}-sw-nw-n-bg
        base=81,144
    [/image]
    [image]
        name={IMAGESTEM}-sw-nw-n-fg
        base=72,182
    [/image]
#enddef

#define SIMAGE_N_NE_SE_S IMAGESTEM
    {SIMAGE_N_NE {IMAGESTEM}}
    {SIMAGE_SE_S {IMAGESTEM}}
    [image]
        name={IMAGESTEM}-n-ne-se-s-fg
        base=144,183  # in front of SE_S
    [/image]
#enddef
#define SIMAGE_S_SW_NW_N IMAGESTEM
    {SIMAGE_NW_N {IMAGESTEM}}
    {SIMAGE_S_SW {IMAGESTEM}}
    [image]
        name={IMAGESTEM}-s-sw-nw-n-fg
        base=72,183  # in front of S_SW
    [/image]
#enddef
#define SIMAGE_NW_N_NE_SE IMAGESTEM
    [image]
        name={IMAGESTEM}-nw-n-ne-se-bg
        base=99,144
    [/image]
    [image]
        name={IMAGESTEM}-n-ne-se-fg
        base=108,182
    [/image]
#enddef
#define SIMAGE_SW_NW_N_NE IMAGESTEM
    [image]
        name={IMAGESTEM}-sw-nw-n-ne-bg
        base=81,144
    [/image]
    [image]
        name={IMAGESTEM}-sw-nw-n-fg
        base=72,182
    [/image]
#enddef
#define SIMAGE_NE_SE_S_SW IMAGESTEM
    [image]
        name={IMAGESTEM}-ne-se-s-sw
        base=90,182
    [/image]
#enddef
#define SIMAGE_SE_S_SW_NW IMAGESTEM
    [image]
        name={IMAGESTEM}-se-s-sw-nw
        base=90,182
    [/image]
#enddef

#define SIMAGE_NW_N_NE_SE_S IMAGESTEM
    {SIMAGE_NW_N_NE {IMAGESTEM}}
    {SIMAGE_SE_S {IMAGESTEM}}
    [image]
        name={IMAGESTEM}-n-ne-se-s-fg
        base=144,183  # in front of SE_S
    [/image]
#enddef
#define SIMAGE_N_NE_SE_S_SW IMAGESTEM
    {SIMAGE_N_NE {IMAGESTEM}}
    {SIMAGE_SE_S_SW {IMAGESTEM}}
    [image]
        name={IMAGESTEM}-n-ne-se-s-fg
        base=144,183  # in front of SE_S_SW
    [/image]
#enddef
#define SIMAGE_NE_SE_S_SW_NW IMAGESTEM
    {SIMAGE_NE_SE {IMAGESTEM}}
    {SIMAGE_SW_NW {IMAGESTEM}}
    [image]
        name={IMAGESTEM}-ne-se-s-sw-nw-fg
        base=90,183  # in front of NE_SE and SW_NW
    [/image]
#enddef
#define SIMAGE_SE_S_SW_NW_N IMAGESTEM
    {SIMAGE_SE_S_SW {IMAGESTEM}}
    {SIMAGE_NW_N {IMAGESTEM}}
    [image]
        name={IMAGESTEM}-s-sw-nw-n-fg
        base=72,183  # in front of SE_S_SW
    [/image]
#enddef
#define SIMAGE_S_SW_NW_N_NE IMAGESTEM
    {SIMAGE_S_SW {IMAGESTEM}}
    {SIMAGE_NW_N_NE {IMAGESTEM}}
    [image]
        name={IMAGESTEM}-s-sw-nw-n-fg
        base=72,183  # in front of S_SW
    [/image]
#enddef
#define SIMAGE_SW_NW_N_NE_SE IMAGESTEM
    [image]
        name={IMAGESTEM}-n-ne-se-fg
        base=108,182
    [/image]
    [image]
        name={IMAGESTEM}-sw-nw-n-fg
        base=72,182
    [/image]
    [image]
        name={IMAGESTEM}-sw-nw-n-ne-se-bg
        base=90,144
    [/image]
#enddef

#define SIMAGE_N_NE_SE_S_SW_NW IMAGESTEM
    {SIMAGE_NW_N_NE {IMAGESTEM}}
    {SIMAGE_SE_S_SW {IMAGESTEM}}
    [image]
        name={IMAGESTEM}-s-sw-nw-n-fg
        base=72,183
    [/image]
    [image]
        name={IMAGESTEM}-n-ne-se-s-fg
        base=144,183
    [/image]
#enddef


#define SWALL_ADJACENT_1 TERRAIN_PATTERN ADJACENT IMAGESTEM

    [terrain_graphics]
        map="
,  *
2,   *
,  1
*,   *
,  *"
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-se
            set_flag=wall-se
        [/tile]
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        {SIMAGE_NW {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  2
*,   *
,  1
*,   *
,  *"
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-s
            set_flag=wall-s
        [/tile]
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        {SIMAGE_N {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  *
*,   2
,  1
*,   *
,  *"
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-sw
            set_flag=wall-sw
        [/tile]
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        {SIMAGE_NE {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  *
*,   *
,  1
*,   2
,  *"
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-nw
            set_flag=wall-nw
        [/tile]
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        {SIMAGE_SE {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  *
*,   *
,  1
*,   *
,  2"
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-n
            set_flag=wall-n
        [/tile]
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        {SIMAGE_S {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  *
*,   *
,  1
2,   *
,  *"
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-ne
            set_flag=wall-ne
        [/tile]
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        {SIMAGE_SW {IMAGESTEM}}
    [/terrain_graphics]

#enddef


#define SWALL_ADJACENT_2 TERRAIN_PATTERN ADJACENT IMAGESTEM

    [terrain_graphics]
        map="
,  3
2,   *
,  1
*,   *
,  *"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-se
            set_flag=wall-se
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-s
            set_flag=wall-s
        [/tile]
        {SIMAGE_NW_N {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  2
*,   3
,  1
*,   *
,  *"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-s
            set_flag=wall-s
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-sw
            set_flag=wall-sw
        [/tile]
        {SIMAGE_N_NE {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  *
*,   2
,  1
*,   3
,  *"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-sw
            set_flag=wall-sw
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-nw
            set_flag=wall-nw
        [/tile]
        {SIMAGE_NE_SE {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  *
*,   *
,  1
*,   2
,  3"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-nw
            set_flag=wall-nw
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-n
            set_flag=wall-n
        [/tile]
        {SIMAGE_SE_S {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  *
*,   *
,  1
3,   *
,  2"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-n
            set_flag=wall-n
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-ne
            set_flag=wall-ne
        [/tile]
        {SIMAGE_S_SW {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  *
3,   *
,  1
2,   *
,  *"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-ne
            set_flag=wall-ne
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-se
            set_flag=wall-se
        [/tile]
        {SIMAGE_SW_NW {IMAGESTEM}}
    [/terrain_graphics]

#enddef

#define SWALL_ADJACENT_3 TERRAIN_PATTERN ADJACENT IMAGESTEM

    [terrain_graphics]
        map="
,  3
2,   4
,  1
*,   *
,  *"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-se
            set_flag=wall-se
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-s
            set_flag=wall-s
        [/tile]
        [tile]
            pos=4
            type={TERRAIN_PATTERN}
            no_flag=wall-sw
            set_flag=wall-sw
        [/tile]
        {SIMAGE_NW_N_NE {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  2
*,   3
,  1
*,   4
,  *"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-s
            set_flag=wall-s
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-sw
            set_flag=wall-sw
        [/tile]
        [tile]
            pos=4
            type={TERRAIN_PATTERN}
            no_flag=wall-nw
            set_flag=wall-nw
        [/tile]
        {SIMAGE_N_NE_SE {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  *
*,   2
,  1
*,   3
,  4"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-sw
            set_flag=wall-sw
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-nw
            set_flag=wall-nw
        [/tile]
        [tile]
            pos=4
            type={TERRAIN_PATTERN}
            no_flag=wall-n
            set_flag=wall-n
        [/tile]
        {SIMAGE_NE_SE_S {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  *
*,   *
,  1
4,   2
,  3"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-nw
            set_flag=wall-nw
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-n
            set_flag=wall-n
        [/tile]
        [tile]
            pos=4
            type={TERRAIN_PATTERN}
            no_flag=wall-ne
            set_flag=wall-ne
        [/tile]
        {SIMAGE_SE_S_SW {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  *
4,   *
,  1
3,   *
,  2"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-n
            set_flag=wall-n
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-ne
            set_flag=wall-ne
        [/tile]
        [tile]
            pos=4
            type={TERRAIN_PATTERN}
            no_flag=wall-se
            set_flag=wall-se
        [/tile]
        {SIMAGE_S_SW_NW {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  4
3,   *
,  1
2,   *
,  *"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-ne
            set_flag=wall-ne
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-se
            set_flag=wall-se
        [/tile]
        [tile]
            pos=4
            type={TERRAIN_PATTERN}
            no_flag=wall-s
            set_flag=wall-s
        [/tile]
        {SIMAGE_SW_NW_N {IMAGESTEM}}
    [/terrain_graphics]

#enddef


#define SWALL_ADJACENT_4 TERRAIN_PATTERN ADJACENT IMAGESTEM

    [terrain_graphics]
        map="
,  3
2,   4
,  1
*,   5
,  *"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-se
            set_flag=wall-se
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-s
            set_flag=wall-s
        [/tile]
        [tile]
            pos=4
            type={TERRAIN_PATTERN}
            no_flag=wall-sw
            set_flag=wall-sw
        [/tile]
        [tile]
            pos=5
            type={TERRAIN_PATTERN}
            no_flag=wall-nw
            set_flag=wall-nw
        [/tile]
        {SIMAGE_NW_N_NE_SE {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  2
*,   3
,  1
*,   4
,  5"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-s
            set_flag=wall-s
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-sw
            set_flag=wall-sw
        [/tile]
        [tile]
            pos=4
            type={TERRAIN_PATTERN}
            no_flag=wall-nw
            set_flag=wall-nw
        [/tile]
        [tile]
            pos=5
            type={TERRAIN_PATTERN}
            no_flag=wall-n
            set_flag=wall-n
        [/tile]
        {SIMAGE_N_NE_SE_S {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  *
*,   2
,  1
5,   3
,  4"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-sw
            set_flag=wall-sw
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-nw
            set_flag=wall-nw
        [/tile]
        [tile]
            pos=4
            type={TERRAIN_PATTERN}
            no_flag=wall-n
            set_flag=wall-n
        [/tile]
        [tile]
            pos=5
            type={TERRAIN_PATTERN}
            no_flag=wall-ne
            set_flag=wall-ne
        [/tile]
        {SIMAGE_NE_SE_S_SW {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  *
5,   *
,  1
4,   2
,  3"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-nw
            set_flag=wall-nw
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-n
            set_flag=wall-n
        [/tile]
        [tile]
            pos=4
            type={TERRAIN_PATTERN}
            no_flag=wall-ne
            set_flag=wall-ne
        [/tile]
        [tile]
            pos=5
            type={TERRAIN_PATTERN}
            no_flag=wall-se
            set_flag=wall-se
        [/tile]
        {SIMAGE_SE_S_SW_NW {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  5
4,   *
,  1
3,   *
,  2"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-n
            set_flag=wall-n
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-ne
            set_flag=wall-ne
        [/tile]
        [tile]
            pos=4
            type={TERRAIN_PATTERN}
            no_flag=wall-se
            set_flag=wall-se
        [/tile]
        [tile]
            pos=5
            type={TERRAIN_PATTERN}
            no_flag=wall-s
            set_flag=wall-s
        [/tile]
        {SIMAGE_S_SW_NW_N {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  4
3,   5
,  1
2,   *
,  *"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-ne
            set_flag=wall-ne
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-se
            set_flag=wall-se
        [/tile]
        [tile]
            pos=4
            type={TERRAIN_PATTERN}
            no_flag=wall-s
            set_flag=wall-s
        [/tile]
        [tile]
            pos=5
            type={TERRAIN_PATTERN}
            no_flag=wall-sw
            set_flag=wall-sw
        [/tile]
        {SIMAGE_SW_NW_N_NE {IMAGESTEM}}
    [/terrain_graphics]

#enddef


#define SWALL_ADJACENT_5 TERRAIN_PATTERN ADJACENT IMAGESTEM

    [terrain_graphics]
        map="
,  3
2,   4
,  1
*,   5
,  6"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-se
            set_flag=wall-se
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-s
            set_flag=wall-s
        [/tile]
        [tile]
            pos=4
            type={TERRAIN_PATTERN}
            no_flag=wall-sw
            set_flag=wall-sw
        [/tile]
        [tile]
            pos=5
            type={TERRAIN_PATTERN}
            no_flag=wall-nw
            set_flag=wall-nw
        [/tile]
        [tile]
            pos=6
            type={TERRAIN_PATTERN}
            no_flag=wall-n
            set_flag=wall-n
        [/tile]
        {SIMAGE_NW_N_NE_SE_S {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  2
*,   3
,  1
6,   4
,  5"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-s
            set_flag=wall-s
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-sw
            set_flag=wall-sw
        [/tile]
        [tile]
            pos=4
            type={TERRAIN_PATTERN}
            no_flag=wall-nw
            set_flag=wall-nw
        [/tile]
        [tile]
            pos=5
            type={TERRAIN_PATTERN}
            no_flag=wall-n
            set_flag=wall-n
        [/tile]
        [tile]
            pos=6
            type={TERRAIN_PATTERN}
            no_flag=wall-ne
            set_flag=wall-ne
        [/tile]
        {SIMAGE_N_NE_SE_S_SW {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  *
6,   2
,  1
5,   3
,  4"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-sw
            set_flag=wall-sw
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-nw
            set_flag=wall-nw
        [/tile]
        [tile]
            pos=4
            type={TERRAIN_PATTERN}
            no_flag=wall-n
            set_flag=wall-n
        [/tile]
        [tile]
            pos=5
            type={TERRAIN_PATTERN}
            no_flag=wall-ne
            set_flag=wall-ne
        [/tile]
        [tile]
            pos=6
            type={TERRAIN_PATTERN}
            no_flag=wall-se
            set_flag=wall-se
        [/tile]
        {SIMAGE_NE_SE_S_SW_NW {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  6
5,   *
,  1
4,   2
,  3"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-nw
            set_flag=wall-nw
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-n
            set_flag=wall-n
        [/tile]
        [tile]
            pos=4
            type={TERRAIN_PATTERN}
            no_flag=wall-ne
            set_flag=wall-ne
        [/tile]
        [tile]
            pos=5
            type={TERRAIN_PATTERN}
            no_flag=wall-se
            set_flag=wall-se
        [/tile]
        [tile]
            pos=6
            type={TERRAIN_PATTERN}
            no_flag=wall-s
            set_flag=wall-s
        [/tile]
        {SIMAGE_SE_S_SW_NW_N {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  5
4,   6
,  1
3,   *
,  2"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-n
            set_flag=wall-n
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-ne
            set_flag=wall-ne
        [/tile]
        [tile]
            pos=4
            type={TERRAIN_PATTERN}
            no_flag=wall-se
            set_flag=wall-se
        [/tile]
        [tile]
            pos=5
            type={TERRAIN_PATTERN}
            no_flag=wall-s
            set_flag=wall-s
        [/tile]
        [tile]
            pos=6
            type={TERRAIN_PATTERN}
            no_flag=wall-sw
            set_flag=wall-sw
        [/tile]
        {SIMAGE_S_SW_NW_N_NE {IMAGESTEM}}
    [/terrain_graphics]

    [terrain_graphics]
        map="
,  4
3,   5
,  1
2,   6
,  *"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            no_flag=wall-ne
            set_flag=wall-ne
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            no_flag=wall-se
            set_flag=wall-se
        [/tile]
        [tile]
            pos=4
            type={TERRAIN_PATTERN}
            no_flag=wall-s
            set_flag=wall-s
        [/tile]
        [tile]
            pos=5
            type={TERRAIN_PATTERN}
            no_flag=wall-sw
            set_flag=wall-sw
        [/tile]
        [tile]
            pos=6
            type={TERRAIN_PATTERN}
            no_flag=wall-nw
            set_flag=wall-nw
        [/tile]
        {SIMAGE_SW_NW_N_NE_SE {IMAGESTEM}}
    [/terrain_graphics]

#enddef


#define SWALL_ADJACENT_6 TERRAIN_PATTERN ADJACENT IMAGESTEM

    [terrain_graphics]
        map="
,  2
7,   3
,  1
6,   4
,  5"
        [tile]
            pos=1
            type={ADJACENT}
        [/tile]
        [tile]
            pos=2
            type={TERRAIN_PATTERN}
            set_flag=wall-s
        [/tile]
        [tile]
            pos=3
            type={TERRAIN_PATTERN}
            set_flag=wall-sw
        [/tile]
        [tile]
            pos=4
            type={TERRAIN_PATTERN}
            set_flag=wall-nw
        [/tile]
        [tile]
            pos=5
            type={TERRAIN_PATTERN}
            set_flag=wall-n
        [/tile]
        [tile]
            pos=6
            type={TERRAIN_PATTERN}
            set_flag=wall-ne
        [/tile]
        [tile]
            pos=7
            type={TERRAIN_PATTERN}
            set_flag=wall-se
        [/tile]
        {SIMAGE_N_NE_SE_S_SW_NW {IMAGESTEM}}
    [/terrain_graphics]

#enddef

